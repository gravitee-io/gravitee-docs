= APIM 3.20 changelog
:page-sidebar: apim_3_x_sidebar
:page-permalink: apim/3.x/changelog-3.20.html
:page-folder: apim
:page-toc: false
:page-layout: apim3x

For upgrade instructions, please refer to https://docs.gravitee.io/apim/3.x/apim_installguide_migration.html[APIM Migration Guide]

*Important:* If you plan to skip versions when you upgrade, ensure that you read the version-specific upgrade notes for each intermediate version. You may be required to perform manual actions as part of the upgrade.

// NOTE: Global 3.20 release info here

// <DO NOT REMOVE THIS COMMENT - ANCHOR FOR FUTURE RELEASES>
 
== APIM - 3.20.3 (2023-03-27)

=== Gateway

* Multiple values of Transaction header when `handlers` is set https://github.com/gravitee-io/issues/issues/7618[#7618]
* No circuit breaker applied on an unhealthy API when dynamic routing is activated https://github.com/gravitee-io/issues/issues/8919[#8919]
* Error when starting the Gateway with Kubernetes values https://github.com/gravitee-io/issues/issues/8927[#8927]
* Synchronization error on startup with multiple environments on SQL database https://github.com/gravitee-io/issues/issues/8929[#8929]
* Gateway timeout is not logged when API is called by another API https://github.com/gravitee-io/issues/issues/8941[#8941]
* Consumer response logs are missing when using the Jupiter engine https://github.com/gravitee-io/issues/issues/8942[#8942]
* Health-check fails if endpoint host contains an underscore https://github.com/gravitee-io/issues/issues/8946[#8946]
* Chunk corruption with TLS and HTTP 1.1  https://github.com/gravitee-io/issues/issues/8956[#8956]
* Random 503 error when using {#properties['backend']} on endpoint target https://github.com/gravitee-io/issues/issues/8959[#8959]
* Wrong value in `proxy-request.headers.host` with Jupiter execution mode https://github.com/gravitee-io/issues/issues/8961[#8961]

=== API

* Response from the request "Attach a media to a portal page" does not give all data like in the documentation https://github.com/gravitee-io/issues/issues/6787[#6787]
* Search by payload does not work properly with special characters https://github.com/gravitee-io/issues/issues/8470[#8470]
* Some characters are not supported in a MongoDB URI https://github.com/gravitee-io/issues/issues/8643[#8643]
* Can not export API after using "Import multiple files" feature https://github.com/gravitee-io/issues/issues/8828[#8828]
* Pagination issue with APIs on different environments https://github.com/gravitee-io/issues/issues/8923[#8923]
* Sending notifications is not possible when there are two subscriptions to a single application https://github.com/gravitee-io/issues/issues/8939[#8939]

=== Console

* Cropped tooltip when charts contain a lot of series https://github.com/gravitee-io/issues/issues/5852[#5852]
* Pagination of the API properties table is not working https://github.com/gravitee-io/issues/issues/7048[#7048]
* Not possible to remove General conditions from a plan https://github.com/gravitee-io/issues/issues/8465[#8465]
* Transfer ownership of API does not automatically display current members https://github.com/gravitee-io/issues/issues/8516[#8516]
* Dashboard shows all APIs stopped when all APIs are started https://github.com/gravitee-io/issues/issues/8760[#8760]
* API can not be updated properly if a plan's name contains a `+` character https://github.com/gravitee-io/issues/issues/8909[#8909]
* API Endpoint configuration is lost when saving healthcheck configuration https://github.com/gravitee-io/issues/issues/8947[#8947]

=== Portal

* Non-required fields displayed as required in OpenAPI documentation https://github.com/gravitee-io/issues/issues/7099[#7099]

=== Other

* Policy SSL Enforcement can be configured with invalid DN https://github.com/gravitee-io/issues/issues/6457[#6457]
* Traffic shadowing policy is not compatible with the latest versions of APIM https://github.com/gravitee-io/issues/issues/8385[#8385]
* Email notifier not handling properly newline in alert body https://github.com/gravitee-io/issues/issues/8752[#8752]
* XMLtoJSON policy does not execute based on Content-Type header value https://github.com/gravitee-io/issues/issues/8953[#8953]

 
== APIM - 3.20.2 (2023-03-03)

=== Gateway

* Gateway exceeded memory limit for $group with mongodb atlas https://github.com/gravitee-io/issues/issues/8914[#8914]
* Server error on flow selection in best-match mode https://github.com/gravitee-io/issues/issues/8899[#8899]
* Fix technical API endpoints: `/_node/monitor` and `/_node/configuration` https://github.com/gravitee-io/issues/issues/8838[#8838] & https://github.com/gravitee-io/issues/issues/8875[#8875]
* Wait for caches to be populated before moving to ready when starting the gateway https://github.com/gravitee-io/issues/issues/8866[#8866]
* Revoke subscriptions when Client ID is changed https://github.com/gravitee-io/issues/issues/8883[#8883]

=== API

* Do not duplicate flows when some dynamic properties are scheduled https://github.com/gravitee-io/issues/issues/8844[#8844]
* Do not override `application_groups` data when upgrading from 3.15 to 3.19 with JDBC https://github.com/gravitee-io/issues/issues/8876[#8876]
* Error when loading Identity Provider with id in uppercase https://github.com/gravitee-io/issues/issues/8900[#8900]
* Password policy pattern not consistent between code and config file https://github.com/gravitee-io/issues/issues/8905[#8905]

=== Console

* Unable to access Gateway instances screen when DB contains a lot of events https://github.com/gravitee-io/issues/issues/8898[#8898]
* API version missing in UI https://github.com/gravitee-io/issues/issues/8904[#8904]
* Response Template for `SPIKE_ARREST_TOO_MANY_REQUESTS` missing https://github.com/gravitee-io/issues/issues/7082[#7082]
* Special characters are truncated inside a query param https://github.com/gravitee-io/issues/issues/8903[#8903]
* Properly display multiple spaces in API name https://github.com/gravitee-io/issues/issues/8867[#8867]
* Allow to save disabled proxy settings when system proxy is ON https://github.com/gravitee-io/issues/issues/8698[#8698]

=== Portal

* Fix Redoc documentation integration https://github.com/gravitee-io/issues/issues/8703[#8703]

 
== APIM - 3.20.1 (2023-02-10)


=== API

* Sanitize some fields of new External User, Application, Plan https://github.com/gravitee-io/issues/issues/7560[#7560] & https://github.com/gravitee-io/issues/issues/8847[#8847]

* Plan policies were lost when migrated from an API to design studio https://github.com/gravitee-io/issues/issues/8632[#8632]
* Bump Email Notifier to `1.5.0` https://github.com/gravitee-io/issues/issues/8830[#8830]
* Update flows condition max size to 512 https://github.com/gravitee-io/issues/issues/8823[#8823] & https://github.com/gravitee-io/issues/issues/8671[#8671]
* Duplicated platform flows when APIM is linked to Cockpit https://github.com/gravitee-io/issues/issues/8832[#8832]
* Unable to start up with JDBC when platform flows have been defined with multiple steps on the same phase https://github.com/gravitee-io/issues/issues/8816[#8816]
* Handle YAML Anchors and Alias when importing OpenAPI file https://github.com/gravitee-io/issues/issues/8858[#8858]

=== Gateway

* Make sure websocket is closed in any cases https://github.com/gravitee-io/gravitee-api-management/pull/2796[#2796]
* EL was not working properly for the assign attribute policy depending on the scope of execution https://github.com/gravitee-io/issues/issues/8810[#8810]
* Subscription lost when redeploying https://github.com/gravitee-io/issues/issues/8855[#8855]

* API Subscription was not working after closing and re-creating https://github.com/gravitee-io/issues/issues/8600[#8600]
* Add support from websocket frame compression https://github.com/gravitee-io/issues/issues/8689[#8689]
* Exception "Error while determining deployed APIs store into events payload" fixed https://github.com/gravitee-io/issues/issues/8464[#8464]
* Do not save clientId in API key subscription https://github.com/gravitee-io/issues/issues/8855[#8855]
* Properly set `response` attribute in the execution context for the `assign-attribute` policy https://github.com/gravitee-io/issues/issues/8810[#8810]

=== Console

* "Show advanced filters" was missing on the analytics page https://github.com/gravitee-io/issues/issues/8677[#8677]
* Version column renamed on API table. https://github.com/gravitee-io/issues/issues/8772[#8772]

* Display icons of APIs in API list screen https://github.com/gravitee-io/issues/issues/8809[#8809]
* Global improvement on log filters https://github.com/gravitee-io/issues/issues/8822[#8822] & https://github.com/gravitee-io/issues/issues/8839[#8839]

=== Portal

* Properly display buttons in application analytics filters https://github.com/gravitee-io/issues/issues/8677[#8677]


== APIM - 3.20 (2023-01-05)

=== API Management - Console

* Brand new menu to unify the experience between all Gravitee products
* Introducing v1 APIs reaching end of support and help users migrate to v2
* APIs list page navigation enhancements
* APIs are read-only if managed by our GKO (Gravitee Kubernetes Operator)
* Allow to delete a media using the Management API
* [V4 M-API] Manage v4 APIs subscriptions as an API Publisher & an API Consumer

=== link:{{'/apim/3.x/event_native_apim_introduction.html' | relative_url}}[Event-Native API Management]

* Endpoint - Kafka Connector Advanced (EE)
** Ability to connect to a secured Kafka cluster
** Introducing RESUME & LIMIT capabilities for QoS (Quality of Service)
* Endpoint - MQTT5 Connector
** Consume messages from a MQTT5 event-broker
** Push messages to a MQTT5 event-broker
* Endpoint - MQTT5 Connector Advanced (EE)
** Ability to connect to a secured MQTT5 event-broker
** Introducing QoS (Quality of Service) capabilities
* Entrypoint - Webhook connector
** Create an API with a webhook entrypoint
** Subscribe to an API with a webhook entrypoint
** Receive messages on my callback url 
* Introducing foundation support for sync API on v4 - httpproxy entrypoint & endpoint
* Message filtering policy
* Support conditions on messages

=== link:{{'/apim/3.x/apim_kubernetes_operator_overview.html'| relative_url}}[Gravitee Kubernetes Operator]

* CRD Lifecycle - Apply changes related CRDs on update
* Store credentials in K8 secrets
* Export a complex API and import it in a new/same environment 
* Manage resources as CRD and reuse them in several APIs
