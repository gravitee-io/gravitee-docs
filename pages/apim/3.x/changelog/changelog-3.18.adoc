= APIM 3.18 changelog
:page-sidebar: apim_3_x_sidebar
:page-permalink: apim/3.x/changelog-3.18.html
:page-folder: apim
:page-toc: false
:page-layout: apim3x

For upgrade instructions, please refer to https://docs.gravitee.io/apim/3.x/apim_installguide_migration.html[APIM Migration Guide]

*Important:* If you plan to skip versions when you upgrade, ensure that you read the version-specific upgrade notes for each intermediate version. You may be required to perform manual actions as part of the upgrade.

// NOTE: Global 3.18 release info here

// <DO NOT REMOVE THIS COMMENT - ANCHOR FOR FUTURE RELEASES>
 
== APIM - 3.18.21 (2023-03-31)

=== Gateway

* Gateway timeout is not logged when API is called by another API https://github.com/gravitee-io/issues/issues/8941[#8941]
* Health-check fails if endpoint host contains an underscore https://github.com/gravitee-io/issues/issues/8946[#8946]
* Chunk corruption with TLS and HTTP 1.1  https://github.com/gravitee-io/issues/issues/8956[#8956]
* Random 503 error when using {#properties['backend']} on endpoint target https://github.com/gravitee-io/issues/issues/8959[#8959]
* Debug mode not working with ssl and haproxy https://github.com/gravitee-io/issues/issues/8984[#8984]

=== API

* Response from the request "Attach a media to a portal page" does not give all data like in the documentation https://github.com/gravitee-io/issues/issues/6787[#6787]
* Search by payload does not work properly with special characters https://github.com/gravitee-io/issues/issues/8470[#8470]
* Sending notifications is not possible when there are two subscriptions to a single application https://github.com/gravitee-io/issues/issues/8939[#8939]
* All API displayed as out of sync even if no change was done https://github.com/gravitee-io/issues/issues/8954[#8954]
* Data lost when upgrading to 3.18+ with JDBC database https://github.com/gravitee-io/issues/issues/8980[#8980]
* API documentation page import impossible using Bitbucket reference  https://github.com/gravitee-io/issues/issues/8985[#8985]

=== Console

* Options of `gv-select` not always visible or correctly placed https://github.com/gravitee-io/issues/issues/8348[#8348]
* Not possible to remove General conditions from a plan https://github.com/gravitee-io/issues/issues/8465[#8465]
* Transfer ownership of API does not automatically display current members https://github.com/gravitee-io/issues/issues/8516[#8516]
* Proxy fields not disabled when System proxy activated in endpoint configuration https://github.com/gravitee-io/issues/issues/8590[#8590]
* Dashboard shows all APIs stopped when all APIs are started https://github.com/gravitee-io/issues/issues/8760[#8760]

=== Other

* Policy SSL Enforcement can be configured with invalid DN https://github.com/gravitee-io/issues/issues/6457[#6457]
* Email notifier not handling properly newline in alert body https://github.com/gravitee-io/issues/issues/8752[#8752]
* XMLtoJSON policy does not execute based on Content-Type header value https://github.com/gravitee-io/issues/issues/8953[#8953]

 
== APIM - 3.18.20 (2023-03-10)

=== Gateway

* No circuit breaker applied on an unhealthy API when dynamic routing is activated https://github.com/gravitee-io/issues/issues/8919[#8919]
* Gateway exceeded memory limit for $group with mongodb atlas https://github.com/gravitee-io/issues/issues/8914[#8914]
* Server error on flow selection in best-match mode https://github.com/gravitee-io/issues/issues/8899[#8899]
* Traffic shadowing policy is not compatible with the latest versions of APIM https://github.com/gravitee-io/issues/issues/8385[#8385]
* Synchronization error on startup with multiple environments on SQL database https://github.com/gravitee-io/issues/issues/8929[#8929]
* Multiple values of Transaction header when `handlers` is set https://github.com/gravitee-io/issues/issues/7618[#7618]

=== API

* Pagination issue with APIs on different environments https://github.com/gravitee-io/issues/issues/8923[#8923]
* API can not be updated properly if a plan's name contains a `+` character https://github.com/gravitee-io/issues/issues/8909[#8909]
* Password policy pattern not consistent between code and config file https://github.com/gravitee-io/issues/issues/8905[#8905]
* Error when loading Identity Provider with id in uppercase https://github.com/gravitee-io/issues/issues/8900[#8900]
* Can not export API after using "Import multiple files" feature https://github.com/gravitee-io/issues/issues/8828[#8828]
* Some characters are not supported in a MongoDB URI https://github.com/gravitee-io/issues/issues/8643[#8643]

=== Console

* Special characters are truncated inside a query param https://github.com/gravitee-io/issues/issues/8903[#8903]
* Unable to access Gateway instances screen when DB contains a lot of events https://github.com/gravitee-io/issues/issues/8898[#8898]
* Cropped tooltip when charts contain a lot of series https://github.com/gravitee-io/issues/issues/5852[#5852]
* Pagination of the API properties table is not working https://github.com/gravitee-io/issues/issues/7048[#7048]
* Response Template for `SPIKE_ARREST_TOO_MANY_REQUESTS` missing https://github.com/gravitee-io/issues/issues/7082[#7082]

=== Portal

* Non-required fields displayed as required in OpenAPI documentation https://github.com/gravitee-io/issues/issues/7099[#7099]
* Redoc documentation is not working and keeps loading https://github.com/gravitee-io/issues/issues/8703[#8703]

 
== APIM - 3.18.19 (2023-02-17)

=== Gateway

* Fix technical API endpoints: `/_node/monitor` and `/_node/configuration` https://github.com/gravitee-io/issues/issues/8838[#8838] & https://github.com/gravitee-io/issues/issues/8875[#8875]
* Wait for caches to be populated before moving to ready when starting the gateway https://github.com/gravitee-io/issues/issues/8866[#8866]

=== API

* Do not duplicate flows when some dynamic properties are scheduled https://github.com/gravitee-io/issues/issues/8844[#8844]
* Properly manage user's firstname and lastname, API names and application names containing accents https://github.com/gravitee-io/issues/issues/8847[#8847]
* Do not override `application_groups` data when upgrading from 3.15 to 3.19 with JDBC https://github.com/gravitee-io/issues/issues/8876[#8876]

=== Console

* Improve API names loading in the platform analytics dashboard https://github.com/gravitee-io/issues/issues/8822[#8822]
* Properly display multiple spaces in API name https://github.com/gravitee-io/issues/issues/8867[#8867]
* Allow to save disabled proxy settings when system proxy is ON https://github.com/gravitee-io/issues/issues/8698[#8698]

=== Portal

* Fix missing "Show advanced filters" on the analytics page of application https://github.com/gravitee-io/issues/issues/8677[#8677]

 
== APIM - 3.18.18 (2023-01-27)

=== API
* Plan policies were lost when migrated from an API to design studio https://github.com/gravitee-io/issues/issues/8632[#8632]
* Notifier email bump to 1.5.0 https://github.com/gravitee-io/issues/issues/8830[#8830]
* Update flows condition max size to 512 https://github.com/gravitee-io/issues/issues/8823[#8823] & https://github.com/gravitee-io/issues/issues/8671[#8671]
* Duplicated platform flows when APIM is linked to Cockpit. https://github.com/gravitee-io/issues/issues/8832[#8832]
* Unable to start up with JDBC when platform flows have been defined with multiple steps on the same phase. https://github.com/gravitee-io/issues/issues/8816[#8816]

=== Gateway
* API Subscription was not working after closing and re-creating https://github.com/gravitee-io/issues/issues/8600[#8600]
* Add support from websocket frame compression https://github.com/gravitee-io/issues/issues/8689[#8689]
* Exception "Error while determining deployed APIs store into events payload" fixed https://github.com/gravitee-io/issues/issues/8464[#8464]
* Properly set `response` attribute in the execution context for the `assign-attribute` policy https://github.com/gravitee-io/issues/issues/8810[#8810]


== APIM - 3.18.17 (2023-01-04)

=== API

* Add a default value in liquibase script when adding a non-nullable constraint on `commands` table



== APIM - 3.18.16 (2023-01-04)

=== API

* Handle flow steps order in database https://github.com/gravitee-io/issues/issues/8805[#8805]
* Handle query with page number higher than max page with data https://github.com/gravitee-io/issues/issues/8773[#8773]



== APIM - 3.18.15 (2023-01-03)

=== Gateway

* API key plan was not useable after migration to 3.18 https://github.com/gravitee-io/issues/issues/8762[#8762]
* Non-explicit "invalid version format: 0" log message fixed https://github.com/gravitee-io/issues/issues/8754[#8754]

=== Management

* PostgreSQL: management API failed to start after 3.18 migration https://github.com/gravitee-io/issues/issues/8774[#8774]
* Import API erased plan general conditions https://github.com/gravitee-io/issues/issues/8767[#8767]
* API key revocation raised an error in non-default environment
 
== APIM - 3.18.14 (2022-12-16)

=== General

* Dynamic property schedule is now updateable https://github.com/gravitee-io/issues/issues/8529[#8529]
* Log details no longer fail with closed OAuth 2 or JWT plan https://github.com/gravitee-io/issues/issues/8685[#8685]
* Optimized database access when searching APIs

=== Gateway
* Manage multiple accept headers with quality factor
* Handle SSL configuration in Debug mode https://github.com/gravitee-io/issues/issues/8711[#8711]

=== Management
* Add `authMethods` choices to be used by the Vert.x mail client of the Email Notifier to restrict the choices of authentication methods https://github.com/gravitee-io/issues/issues/8655[#8655]
* Properly handle special characters in username https://github.com/gravitee-io/issues/issues/8673[#8673]

=== Console
* Automatically display api subscriptions when browsing the subscription screen https://github.com/gravitee-io/issues/issues/8739[#8739]
* Include archived applications in the filters available in the log screen https://github.com/gravitee-io/issues/issues/8690[#8690]
* Fix display of log details with closed oauth2 or jwt plan https://github.com/gravitee-io/issues/issues/8685[#8685]

=== Portal
* Remove untranslated metadata name placeholder https://github.com/gravitee-io/issues/issues/7235[#7235]


== https://github.com/gravitee-io/issues/milestone/615?closed=1[APIM - 3.18.13 (2022-11-25)]

=== Bug fixes

*_Console_*

- Design studio's debug mode is not working in gateway bridge configuration https://github.com/gravitee-io/issues/issues/8486[#8486]

*_General_*

- Merge 3.15.18 into 3.18.x https://github.com/gravitee-io/issues/issues/8658[#8658]

*_Management_*

- Api subscribers resource should return nothing when there is no subscriptions. https://github.com/gravitee-io/issues/issues/8630[#8630]
- Duplicate users on login when special characters https://github.com/gravitee-io/issues/issues/8672[#8672]

=== Improvements

*_Gateway_*

- API Keys Synchronization - Lazy loading mechanism implementation https://github.com/gravitee-io/issues/issues/8680[#8680]




=== Features

*_Management_*

- Possibility to override the default background image of the APIM Developer Portal from the theme customisation page


=== Improvements

*_General_*

- Support Inline lists in Expression Language https://github.com/gravitee-io/issues/issues/7894[#7894]
- Clearly explain how to have the Portal on a dynamic base url https://github.com/gravitee-io/issues/issues/8518[#8518]. +
More information https://docs.gravitee.io/apim/3.x/apim_installguide_migration.html#console_with_a_custom_base_url[here]


== https://github.com/gravitee-io/issues/milestone/610?closed=1[APIM - 3.18.12 (2022-11-04)]

=== Bug fixes

*_Management_*

- Max clause count set to 1024 error when searching for apis https://github.com/gravitee-io/issues/issues/8568[#8568]
- Error when trying get the subscribers to an api https://github.com/gravitee-io/issues/issues/8567[#8567]
- Issue when trying to promote API through Cockpit https://github.com/gravitee-io/issues/issues/8598[#8598]

*_Gateway_*

- Accept-Encoding headers should not be deleted from the gateway https://github.com/gravitee-io/issues/issues/7935[#7935]
- Incorrect Status Code description when using Response Template https://github.com/gravitee-io/issues/issues/8613[#8613]


*_Policy_*

- [Cache] Query parameters should be part of the default cache key https://github.com/gravitee-io/issues/issues/8366[#8366]

=== Features

*_Management_*

- Possibility to override the default background image of the APIM Developer Portal from the theme customisation page

=== Improvements

*_General_*

- Clearly explain how to have the Portal on a dynamic base url https://github.com/gravitee-io/issues/issues/8518[#8518]. +
More information https://docs.gravitee.io/apim/3.x/apim_installguide_migration.html#console_with_a_custom_base_url[here]


== https://github.com/gravitee-io/issues/milestone/603?closed=1[APIM - 3.18.11 (2022-10-13)]

=== Bug fixes

*_Gateway_*

- Api key synchronization process consumes too much database resources https://github.com/gravitee-io/issues/issues/8565[#8565]

*_General_*

- DELETE user throw errors when user is member of an API https://github.com/gravitee-io/issues/issues/8566[#8566]
- Allow nested EL expressions https://github.com/gravitee-io/issues/issues/8564[#8564]
 

== https://github.com/gravitee-io/issues/milestone/600?closed=1[APIM - 3.18.10 (2022-09-23)]

=== Bug fixes

*_Gateway_*

- Dedicated implementation for hybrid deployment standalone mode https://github.com/gravitee-io/issues/issues/8482[#8482]

*_Management_*

- Server unreachable when trying to subscribe to APIs https://github.com/gravitee-io/issues/issues/8496[#8496]
- Status codes in the dashboard are not sorted in order https://github.com/gravitee-io/issues/issues/8497[#8497]
 

== https://github.com/gravitee-io/issues/milestone/598?closed=1[APIM - 3.18.9 (2022-09-16)]

=== Bug fixes

*_Console_*

- Design studio's debug mode is not working in gateway bridge configuration https://github.com/gravitee-io/issues/issues/8373[#8373]
- Subscription Page can not be displayed when having a lot of applications (more than 10k) https://github.com/gravitee-io/issues/issues/8421[#8421]

*_Gateway_*

- Plan selector should throw 401 on wrong API-Key even if a keyless plan is available https://github.com/gravitee-io/issues/issues/8452[#8452]

*_General_*

- Regex quantifier wrongly interpreted causing matching issues https://github.com/gravitee-io/issues/issues/8367[#8367]

*_Management_*

- Health check not properly reported as unhealthy if timeout occurs when reaching the backend https://github.com/gravitee-io/issues/issues/8429[#8429]
- Restore plan selection behavior with multi OAuth plans without selection rule https://github.com/gravitee-io/issues/issues/8460[#8460]

*_Portal_*

- Validate button does not work when trying to subscribe to an API with general conditions set https://github.com/gravitee-io/issues/issues/8442[#8442]

=== Improvements

*_General_*

- Support Inline lists in Expression Language  https://github.com/gravitee-io/issues/issues/7894[#7894]


== https://github.com/gravitee-io/issues/milestone/595?closed=1[APIM - 3.18.8 (2022-09-07)]

=== Bug fixes

*_General_*

- Api key repository search method causing OOM error on DocumentDB https://github.com/gravitee-io/issues/issues/8419[#8419]

*_Management_*

- Exported paths based APIs can not be imported https://github.com/gravitee-io/issues/issues/8365[#8365]
- [Debug Mode] Query params are not well displayed https://github.com/gravitee-io/issues/issues/7779[#7779]


== https://github.com/gravitee-io/issues/milestone/592?closed=1[APIM - 3.18.7 (2022-08-31)]

=== Bug fixes

*_Console_*

- Inconsistent behavior for API out of sync banner https://github.com/gravitee-io/issues/issues/8343[#8343]
- User's list of APIs doesn't display properly https://github.com/gravitee-io/issues/issues/8344[#8344]

*_Gateway_*

- Improve plan selection based on subscription https://github.com/gravitee-io/issues/issues/8167[#8167]

*_Policy_*

- [XSLT transformation] parameter get cached depending on the number of gateways https://github.com/gravitee-io/issues/issues/8387[#8387]

*_General_*

- Merge 3.15.14 in 3.18.x https://github.com/gravitee-io/issues/issues/8355[#8355]
- Merge 3.15.15 in 3.18.x https://github.com/gravitee-io/issues/issues/8371[#8371]


== https://github.com/gravitee-io/issues/milestone/585?closed=1[APIM - 3.18.6 (2022-08-23)]

=== Improvements

*_General_*

- Improve application search in subscription process - https://github.com/gravitee-io/issues/issues/8329[#8329]


== https://github.com/gravitee-io/issues/milestone/582?closed=1[APIM - 3.18.5 (2022-08-17)]

=== Bug fixes

*_Console_*

- Use correct path in constants.json https://github.com/gravitee-io/issues/issues/8283[#8283]
- When dragging Json to XML policy in Design Studio, Save button is not displayed https://github.com/gravitee-io/issues/issues/8227[#8227]

*_Management_*

- Application client_id update is ignored https://github.com/gravitee-io/issues/issues/8278[#8278]
- NullPointerException when deleting a group https://github.com/gravitee-io/issues/issues/8320[#8320]
- Platform alerts never triggered https://github.com/gravitee-io/issues/issues/8269[#8269]
- Temporary allow `null` value for host in virtual-hosts https://github.com/gravitee-io/issues/issues/8300[#8300]

*_Portal_*

- Unable to refresh a page when deploying with Docker https://github.com/gravitee-io/issues/issues/8317[#8317]

*_Reporters_*

- File and TCP reporters - filtering feature not fully implemented for headers https://github.com/gravitee-io/issues/issues/8226[#8226]

=== Features

*_Console_*

- Disable in-app documentation when Pendo is activated https://github.com/gravitee-io/issues/issues/8292[#8292]

=== Improvements

*_Management_*

- Global performances improvement of GET /applications https://github.com/gravitee-io/issues/issues/7836[#7836]


== https://github.com/gravitee-io/issues/milestone/578?closed=1[APIM - 3.18.4 (2022-08-02)]

=== Bug fixes

*_General_*

- Error while trying to connect using IDP with group mapping https://github.com/gravitee-io/issues/issues/8205[#8205]
- Merge APIM `3.17.5` into `3.18.x` https://github.com/gravitee-io/issues/issues/8265[#8265]

=== Features

*_General_*

- Add `gateway-bridge-http-server` to the APIM REST API bundle https://github.com/gravitee-io/issues/issues/8133[#8133]


== https://github.com/gravitee-io/issues/milestone/574?closed=1[APIM - 3.18.3 (2022-07-20)]

=== Bug fixes

*_Management_*

- Handle Pendo ApiKey with correct attribute in `gravitee.yaml` https://github.com/gravitee-io/issues/issues/8155[#8155]
- Mongodb migrations scripts fails https://github.com/gravitee-io/issues/issues/8147[#8147]
- Management API fails to start if API without primary https://github.com/gravitee-io/issues/issues/8130[#8130]



== https://github.com/gravitee-io/issues/milestone/571?closed=1[APIM - 3.18.2 (2022-07-15)]

=== Bug fixes

*_Management_*

- Can't login when using JDBC database https://github.com/gravitee-io/issues/issues/8110[#8110]




== https://github.com/gravitee-io/issues/milestone/564?closed=1[APIM - 3.18.1 (2022-07-08)]

=== Bug fixes

*_Gateway_*

- file reporter log files are not created https://github.com/gravitee-io/issues/issues/8065[#8065]

*_General_*

- Update build version number of Console and Portal https://github.com/gravitee-io/issues/issues/8072[#8072]

*_Portal_*

- OpenAPI specification of the Portal API not available https://github.com/gravitee-io/issues/issues/8074[#8074]


== https://github.com/gravitee-io/issues/milestone/519?closed=1[APIM - 3.18.0 (2022-07-07)]

=== Bug fixes

*_Console_*

- Remove the horizontal scroll bar in the markdown creation page https://github.com/gravitee-io/issues/issues/5119[#5119]
- Wrong example when generating Personal Access Token https://github.com/gravitee-io/issues/issues/5271[#5271]
- Not_equals alert filter displays an empty list https://github.com/gravitee-io/issues/issues/7489[#7489]
- Icons not rendering with custom nginx configuration https://github.com/gravitee-io/issues/issues/7569[#7569]

*_General_*

- Merge 3.17.2 into master https://github.com/gravitee-io/issues/issues/7617[#7617]

*_Management_*

- DCR providers should be scoped by org https://github.com/gravitee-io/issues/issues/6604[#6604]
- One shot upgraders run on each APIM startup with cockpit https://github.com/gravitee-io/issues/issues/7450[#7450]
- OpenApi files are never updated https://github.com/gravitee-io/issues/issues/7631[#7631]

*_Policies_*

- Retry Policy: cancel timeout response, manage lastResponse counter and tests https://github.com/gravitee-io/issues/issues/7747[#7747]
- Data Logging Masking: fix some bugs https://github.com/gravitee-io/issues/issues/7758[#7758]

=== Features

*_Console_*

- Promote API Designer https://github.com/gravitee-io/issues/issues/7645[#7645]
- Add Pendo analytics tool https://github.com/gravitee-io/issues/issues/7781[#7781]

*_General_*

- Support of RHEL8 https://github.com/gravitee-io/issues/issues/7208[#7208]

*_Management_*

- Partial update - PATCH method on Import API https://github.com/gravitee-io/issues/issues/7443[#7443]
- Add page to display organization Audit https://github.com/gravitee-io/issues/issues/7536[#7536]

*_Policies_*

- Transform-Header: Define headers based on the request or on the response payload https://github.com/gravitee-io/issues/issues/7359[#7359]
- Circuit Breaker: Write documentation for policy https://github.com/gravitee-io/issues/issues/7756[#7756]

=== Improvements

*_Console_*

- API properties header title change https://github.com/gravitee-io/issues/issues/6065[#6065]
- Add Conditional icon in legend https://github.com/gravitee-io/issues/issues/7457[#7457]

*_General_*

- Mutualize System proxy configuration https://github.com/gravitee-io/issues/issues/7739[#7739]

*_Portal_*

- Migrate to last Angular version https://github.com/gravitee-io/issues/issues/6666[#6666]
