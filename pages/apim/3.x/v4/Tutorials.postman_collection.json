{
	"info": {
		"_postman_id": "bdc26f05-11a9-4b2c-bc7d-765ad1fc9bd5",
		"name": "Tutorials",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "24480925"
	},
	"item": [
		{
			"name": "Delete API",
			"item": [
				{
					"name": "Stop the API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}?action=stop",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							],
							"query": [
								{
									"key": "action",
									"value": "stop"
								}
							]
						}
					},
					"response": [
						{
							"name": "Stop the API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}?action=stop",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}"
									],
									"query": [
										{
											"key": "action",
											"value": "stop"
										}
									]
								}
							},
							"status": "No Content",
							"code": 204,
							"_postman_previewlanguage": "plain",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUwNzc2NzMsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.dOVyVZWzqtsg2K9xgGrKbKn-EYLLIrzYsyOwzzgzzcs; Path=/; Expires=Mon, 06-Feb-2023 11:21:13 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675077673544\""
								},
								{
									"key": "Last-Modified",
									"value": "Mon, 30 Jan 2023 11:21:13 GMT"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								}
							],
							"cookie": [],
							"body": null
						}
					]
				},
				{
					"name": "Close Plan",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans/{{plan}}/_close",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans",
								"{{plan}}",
								"_close"
							]
						}
					},
					"response": [
						{
							"name": "Close Plan",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans/{{plan}}/_close",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"plans",
										"{{plan}}",
										"_close"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUwNzc3NDIsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.xDw0Ewsh8WdUl6u6SLZPpHDof_GwANJKnAmGeMLsIUI; Path=/; Expires=Mon, 06-Feb-2023 11:22:22 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1181"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"ccf21839-1fc0-4bf3-b218-391fc01bf380\",\n    \"name\": \"Rate-limiting\",\n    \"description\": \"One request every 20 seconds\",\n    \"createdAt\": 1675074425522,\n    \"updatedAt\": 1675077742108,\n    \"publishedAt\": 1675074425522,\n    \"closedAt\": 1675077742108,\n    \"validation\": \"auto\",\n    \"type\": \"api\",\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [\n        {\n            \"name\": \"All requests\",\n            \"enabled\": true,\n            \"selectors\": [\n                {\n                    \"type\": \"channel\",\n                    \"channel\": \"/\",\n                    \"channelOperator\": \"STARTS_WITH\",\n                    \"entrypoints\": [\n                        \"http-post\",\n                        \"http-get\"\n                    ]\n                }\n            ],\n            \"request\": [\n                {\n                    \"name\": \"Rate Limiting\",\n                    \"description\": \"Rate limit\",\n                    \"enabled\": true,\n                    \"policy\": \"rate-limit\",\n                    \"configuration\": {\n                        \"addHeaders\": true,\n                        \"rate\": {\n                            \"limit\": 1,\n                            \"periodTime\": 20,\n                            \"periodTimeUnit\": \"SECONDS\"\n                        }\n                    }\n                }\n            ],\n            \"response\": [],\n            \"subscribe\": [],\n            \"publish\": [],\n            \"tags\": []\n        }\n    ],\n    \"status\": \"closed\",\n    \"apiId\": \"4bfb005f-45ae-4358-bb00-5f45ae435855\",\n    \"order\": 0,\n    \"characteristics\": [],\n    \"commentRequired\": false,\n    \"planStatus\": \"closed\",\n    \"planSecurity\": {\n        \"type\": \"key-less\"\n    },\n    \"planValidation\": \"auto\"\n}"
						}
					]
				},
				{
					"name": "Delete API",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							]
						}
					},
					"response": [
						{
							"name": "Delete API",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}"
									]
								}
							},
							"status": "No Content",
							"code": 204,
							"_postman_previewlanguage": "plain",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUwNzc3NTEsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.N1MEIFuNDH5AmKjsi1YMMsHMZ1L6mCG-2nOSjcUFxAI; Path=/; Expires=Mon, 06-Feb-2023 11:22:31 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								}
							],
							"cookie": [],
							"body": null
						}
					]
				}
			]
		},
		{
			"name": "Kafka and HTTP",
			"item": [
				{
					"name": "Create API",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Kafka and HTTP\",\n    \"apiVersion\": \"1.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Data Ingestion to Kafka\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/http-get\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-get\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 1,\n                        \"messagesLimitDurationMs\": 10000,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								""
							]
						}
					},
					"response": [
						{
							"name": "Create API",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Kafka and HTTP\",\n    \"apiVersion\": \"1.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Data Ingestion to Kafka\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/http-get\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-get\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 1,\n                        \"messagesLimitDurationMs\": 10000,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										""
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUzMzI0NTAsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.J7Auu3-o_gTrqLOEj6BTkBUyMGYvop5EMGJAOsN4y6Y; Path=/; Expires=Thu, 09-Feb-2023 10:07:30 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/bdd16092-4d36-47d7-9160-924d3657d7f2"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1748"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"bdd16092-4d36-47d7-9160-924d3657d7f2\",\n    \"name\": \"Kafka and HTTP\",\n    \"apiVersion\": \"1.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"createdAt\": 1675332450547,\n    \"updatedAt\": 1675332450547,\n    \"description\": \"Data Ingestion to Kafka\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/http-get/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-get\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 1,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false,\n                        \"messagesLimitDurationMs\": 10000\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\": [\n                            \"demo\"\n                        ],\n                        \"producer\": {\n                            \"enabled\": true\n                        },\n                        \"consumer\": {\n                            \"encodeMessageId\": true,\n                            \"enabled\": true,\n                            \"autoOffsetReset\": \"latest\"\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [],\n            \"publish\": [],\n            \"tags\": []\n        }\n    ],\n    \"groups\": [],\n    \"visibility\": \"PRIVATE\",\n    \"state\": \"STOPPED\",\n    \"primaryOwner\": {\n        \"id\": \"aebec2d0-0ee4-4bc5-bec2-d00ee4fbc527\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				},
				{
					"name": "Create keyless plan",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\":\"Keyless\",\n    \"description\":\"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\":[],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": [
						{
							"name": "Create keyless plan",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\":\"Keyless\",\n    \"description\":\"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\":[],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"plans"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUzMzI4NzUsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.knk-uYUddamU3M-wzmBTg1x7ISsMHescizpir7GsSSQ; Path=/; Expires=Thu, 09-Feb-2023 10:14:35 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/bdd16092-4d36-47d7-9160-924d3657d7f2/plans/21e75e0c-0515-43b8-a75e-0c051583b847"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "561"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"21e75e0c-0515-43b8-a75e-0c051583b847\",\n    \"name\": \"Keyless\",\n    \"description\": \"Keyless\",\n    \"createdAt\": 1675332875430,\n    \"updatedAt\": 1675332875430,\n    \"publishedAt\": 1675332875430,\n    \"validation\": \"auto\",\n    \"type\": \"api\",\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [],\n    \"status\": \"published\",\n    \"apiId\": \"bdd16092-4d36-47d7-9160-924d3657d7f2\",\n    \"order\": 0,\n    \"characteristics\": [],\n    \"commentRequired\": false,\n    \"planStatus\": \"published\",\n    \"planSecurity\": {\n        \"type\": \"key-less\"\n    },\n    \"planValidation\": \"auto\"\n}"
						}
					]
				},
				{
					"name": "Start API",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/?action=start",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								""
							],
							"query": [
								{
									"key": "action",
									"value": "start"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Push Data",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tempF\": \"75\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{gateway_host}}/data/ingestion/kafka",
							"host": [
								"{{gateway_host}}"
							],
							"path": [
								"data",
								"ingestion",
								"kafka"
							]
						}
					},
					"response": [
						{
							"name": "Push Data",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"tempF\": \"75\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gateway_host}}/data/ingestion/kafka",
									"host": [
										"{{gateway_host}}"
									],
									"path": [
										"data",
										"ingestion",
										"kafka"
									]
								}
							},
							"status": "Too Many Requests",
							"code": 429,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Gravitee-Transaction-Id",
									"value": "130ed78e-2c0c-4320-8ed7-8e2c0c53202b"
								},
								{
									"key": "X-Gravitee-Request-Id",
									"value": "130ed78e-2c0c-4320-8ed7-8e2c0c53202b"
								},
								{
									"key": "X-Gravitee-Client-Identifier",
									"value": "130ed78e-2c0c-4320-8ed7-8e2c0c53202b"
								},
								{
									"key": "X-Rate-Limit-Limit",
									"value": "1"
								},
								{
									"key": "X-Rate-Limit-Remaining",
									"value": "0"
								},
								{
									"key": "X-Rate-Limit-Reset",
									"value": "1675334868263"
								},
								{
									"key": "Content-Length",
									"value": "107"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": \"Rate limit exceeded ! You reach the limit of 1 requests per 20 seconds\",\n    \"http_status_code\": 429\n}"
						}
					]
				},
				{
					"name": "Get Data",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{gateway_host}}/demo/http-get",
							"host": [
								"{{gateway_host}}"
							],
							"path": [
								"demo",
								"http-get"
							]
						}
					},
					"response": [
						{
							"name": "Get Data",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_host}}/demo/http-get",
									"host": [
										"{{gateway_host}}"
									],
									"path": [
										"demo",
										"http-get"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Gravitee-Transaction-Id",
									"value": "24a04748-547b-444a-a047-48547ba44ad1"
								},
								{
									"key": "X-Gravitee-Request-Id",
									"value": "24a04748-547b-444a-a047-48547ba44ad1"
								},
								{
									"key": "X-Gravitee-Client-Identifier",
									"value": "24a04748-547b-444a-a047-48547ba44ad1"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "transfer-encoding",
									"value": "chunked"
								}
							],
							"cookie": [],
							"body": "{\n    \"items\": []\n}"
						},
						{
							"name": "Get Data",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_host}}/demo/http-get",
									"host": [
										"{{gateway_host}}"
									],
									"path": [
										"demo",
										"http-get"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Gravitee-Transaction-Id",
									"value": "fe3cb71b-c669-41ee-bcb7-1bc66941ee9c"
								},
								{
									"key": "X-Gravitee-Request-Id",
									"value": "fe3cb71b-c669-41ee-bcb7-1bc66941ee9c"
								},
								{
									"key": "X-Gravitee-Client-Identifier",
									"value": "fe3cb71b-c669-41ee-bcb7-1bc66941ee9c"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "transfer-encoding",
									"value": "chunked"
								}
							],
							"cookie": [],
							"body": "{\n    \"items\": [\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        }\n    ]\n}"
						},
						{
							"name": "Get Data",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_host}}/demo/http-get",
									"host": [
										"{{gateway_host}}"
									],
									"path": [
										"demo",
										"http-get"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Gravitee-Transaction-Id",
									"value": "38a8ff6c-0cc9-4e8c-a8ff-6c0cc92e8c50"
								},
								{
									"key": "X-Gravitee-Request-Id",
									"value": "38a8ff6c-0cc9-4e8c-a8ff-6c0cc92e8c50"
								},
								{
									"key": "X-Gravitee-Client-Identifier",
									"value": "38a8ff6c-0cc9-4e8c-a8ff-6c0cc92e8c50"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "transfer-encoding",
									"value": "chunked"
								}
							],
							"cookie": [],
							"body": "{\n    \"items\": [\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Modify API",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Data Ingestion to Kafka\",\n    \"apiVersion\": \"1.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Data Ingestion to Kafka\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/http-get\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-get\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 100,\n                        \"messagesLimitDurationMs\": 10000,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							]
						}
					},
					"response": [
						{
							"name": "Modify API",
							"originalRequest": {
								"method": "PUT",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Data Ingestion to Kafka\",\n    \"apiVersion\": \"1.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Data Ingestion to Kafka\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/http-get\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-get\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 100,\n                        \"messagesLimitDurationMs\": 10000,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUzMzQ2MTYsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.S9yXJsHEPM7u2DPwGvosxWVRJo9hy4UcJx_Abwp9aaE; Path=/; Expires=Thu, 09-Feb-2023 10:43:36 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675334616765\""
								},
								{
									"key": "Last-Modified",
									"value": "Thu, 02 Feb 2023 10:43:36 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "3463"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"bdd16092-4d36-47d7-9160-924d3657d7f2\",\n    \"name\": \"Data Ingestion to Kafka\",\n    \"apiVersion\": \"1.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1675332953828,\n    \"createdAt\": 1675332450547,\n    \"updatedAt\": 1675334616765,\n    \"description\": \"Data Ingestion to Kafka\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/http-get/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-get\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 100,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false,\n                        \"messagesLimitDurationMs\": 10000\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\": [\n                            \"demo\"\n                        ],\n                        \"producer\": {\n                            \"enabled\": true\n                        },\n                        \"consumer\": {\n                            \"encodeMessageId\": true,\n                            \"enabled\": true,\n                            \"autoOffsetReset\": \"latest\"\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [\n        {\n            \"id\": \"21e75e0c-0515-43b8-a75e-0c051583b847\",\n            \"name\": \"Keyless\",\n            \"description\": \"Keyless\",\n            \"createdAt\": 1675332875430,\n            \"updatedAt\": 1675332875430,\n            \"publishedAt\": 1675332875430,\n            \"validation\": \"auto\",\n            \"type\": \"api\",\n            \"security\": {\n                \"type\": \"key-less\"\n            },\n            \"flows\": [],\n            \"status\": \"published\",\n            \"apiId\": \"bdd16092-4d36-47d7-9160-924d3657d7f2\",\n            \"order\": 0,\n            \"characteristics\": [],\n            \"commentRequired\": false,\n            \"planStatus\": \"published\",\n            \"planSecurity\": {\n                \"type\": \"key-less\"\n            },\n            \"planValidation\": \"auto\"\n        },\n        {\n            \"id\": \"a3f26569-21b2-49e2-b265-6921b219e2c3\",\n            \"name\": \"Keyless\",\n            \"description\": \"Keyless\",\n            \"createdAt\": 1675332553644,\n            \"updatedAt\": 1675332813372,\n            \"publishedAt\": 1675332708766,\n            \"closedAt\": 1675332813372,\n            \"validation\": \"auto\",\n            \"type\": \"api\",\n            \"security\": {\n                \"type\": \"key-less\"\n            },\n            \"flows\": [],\n            \"status\": \"closed\",\n            \"apiId\": \"bdd16092-4d36-47d7-9160-924d3657d7f2\",\n            \"order\": 1,\n            \"characteristics\": [],\n            \"commentRequired\": false,\n            \"planStatus\": \"closed\",\n            \"planSecurity\": {\n                \"type\": \"key-less\"\n            },\n            \"planValidation\": \"auto\"\n        }\n    ],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [],\n            \"publish\": [],\n            \"tags\": []\n        }\n    ],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"aebec2d0-0ee4-4bc5-bec2-d00ee4fbc527\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"pictureUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/bdd16092-4d36-47d7-9160-924d3657d7f2/picture?hash=1675334616765\",\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false,\n    \"backgroundUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/bdd16092-4d36-47d7-9160-924d3657d7f2/background?hash=1675334616765\"\n}"
						}
					]
				},
				{
					"name": "Redeploy API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"deploy"
							]
						}
					},
					"response": [
						{
							"name": "Redeploy API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"deploy"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUzMzQ2NTEsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.JZDW_V6NqFNQaki1ebf95-5TTPByGZIzekx8NyQtVUE; Path=/; Expires=Thu, 09-Feb-2023 10:44:11 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675334651129\""
								},
								{
									"key": "Last-Modified",
									"value": "Thu, 02 Feb 2023 10:44:11 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1860"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"bdd16092-4d36-47d7-9160-924d3657d7f2\",\n    \"name\": \"Data Ingestion to Kafka\",\n    \"apiVersion\": \"1.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1675334651129,\n    \"createdAt\": 1675332450547,\n    \"updatedAt\": 1675334651129,\n    \"description\": \"Data Ingestion to Kafka\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/http-get/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-get\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 100,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false,\n                        \"messagesLimitDurationMs\": 10000\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\": [\n                            \"demo\"\n                        ],\n                        \"producer\": {\n                            \"enabled\": true\n                        },\n                        \"consumer\": {\n                            \"encodeMessageId\": true,\n                            \"enabled\": true,\n                            \"autoOffsetReset\": \"latest\"\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [],\n            \"publish\": []\n        }\n    ],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"aebec2d0-0ee4-4bc5-bec2-d00ee4fbc527\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				},
				{
					"name": "Close plan",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans/{{plan}}/_close",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans",
								"{{plan}}",
								"_close"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create a rate-limiting plan",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Rate-limiting\",\n    \"description\": \"One request every 20 seconds\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [\n        {\n            \"name\": \"All requests\",\n            \"selectors\": [\n                {\n                    \"type\": \"channel\",\n                    \"entrypoints\": [\n                        \"http-post\",\n                        \"http-get\"\n                    ]\n                }\n            ],\n            \"request\": [\n                {\n                    \"name\": \"Rate Limiting\",\n                    \"description\": \"Rate limit\",\n                    \"policy\": \"rate-limit\",\n                    \"configuration\": {\n                        \"addHeaders\": true,\n                        \"rate\": {\n                            \"limit\": 1,\n                            \"periodTime\": 20,\n                            \"periodTimeUnit\": \"SECONDS\"\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": [
						{
							"name": "Create a rate-limiting plan",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Rate-limiting\",\n    \"description\": \"One request every 20 seconds\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [\n        {\n            \"name\": \"All requests\",\n            \"selectors\": [\n                {\n                    \"type\": \"channel\",\n                    \"entrypoints\": [\n                        \"http-post\",\n                        \"http-get\"\n                    ]\n                }\n            ],\n            \"request\": [\n                {\n                    \"name\": \"Rate Limiting\",\n                    \"description\": \"Rate limit\",\n                    \"policy\": \"rate-limit\",\n                    \"configuration\": {\n                        \"addHeaders\": true,\n                        \"rate\": {\n                            \"limit\": 1,\n                            \"periodTime\": 20,\n                            \"periodTimeUnit\": \"SECONDS\"\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"plans"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUzMzQ3NjksInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.GkMkquHmnoM0POm56hnw4jKQ43j-uNQQfzlFrLQ9xRo; Path=/; Expires=Thu, 09-Feb-2023 10:46:09 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/bdd16092-4d36-47d7-9160-924d3657d7f2/plans/b944c060-5d84-4bac-84c0-605d84abac32"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1157"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"b944c060-5d84-4bac-84c0-605d84abac32\",\n    \"name\": \"Rate-limiting\",\n    \"description\": \"One request every 20 seconds\",\n    \"createdAt\": 1675334769233,\n    \"updatedAt\": 1675334769233,\n    \"publishedAt\": 1675334769233,\n    \"validation\": \"auto\",\n    \"type\": \"api\",\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [\n        {\n            \"name\": \"All requests\",\n            \"enabled\": true,\n            \"selectors\": [\n                {\n                    \"type\": \"channel\",\n                    \"channel\": \"/\",\n                    \"channelOperator\": \"STARTS_WITH\",\n                    \"entrypoints\": [\n                        \"http-post\",\n                        \"http-get\"\n                    ]\n                }\n            ],\n            \"request\": [\n                {\n                    \"name\": \"Rate Limiting\",\n                    \"description\": \"Rate limit\",\n                    \"enabled\": true,\n                    \"policy\": \"rate-limit\",\n                    \"configuration\": {\n                        \"addHeaders\": true,\n                        \"rate\": {\n                            \"limit\": 1,\n                            \"periodTime\": 20,\n                            \"periodTimeUnit\": \"SECONDS\"\n                        }\n                    }\n                }\n            ],\n            \"response\": [],\n            \"subscribe\": [],\n            \"publish\": [],\n            \"tags\": []\n        }\n    ],\n    \"status\": \"published\",\n    \"apiId\": \"bdd16092-4d36-47d7-9160-924d3657d7f2\",\n    \"order\": 0,\n    \"characteristics\": [],\n    \"commentRequired\": false,\n    \"planStatus\": \"published\",\n    \"planSecurity\": {\n        \"type\": \"key-less\"\n    },\n    \"planValidation\": \"auto\"\n}"
						}
					]
				}
			]
		},
		{
			"name": "Kafka and SSE",
			"item": [
				{
					"name": "Create the API",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Kafka and SSE\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Kafka and SSE\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/sse/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"sse\",\n                    \"configuration\": {\n                        \"heartbeatIntervalInMs\": 5000,\n                        \"metadataAsComment\": false,\n                        \"headersAsComment\": false\n                    }\n                }\n            ]\n        },\n        {\n        \"type\": \"http\",\n        \"paths\": [\n            {\n                \"path\": \"/data/ingestion/kafka\"\n            }\n        ],\n        \"entrypoints\": [\n            {\n                \"type\": \"http-post\",\n                \"configuration\": {\n                    \"requestHeadersToMessage\": false\n                }\n            }\n        ]\n      }\n    ],\n\"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis"
							]
						}
					},
					"response": [
						{
							"name": "Create the API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Kafka and SSE\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Kafka and SSE\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/sse/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"sse\",\n                    \"configuration\": {\n                        \"heartbeatIntervalInMs\": 5000,\n                        \"metadataAsComment\": false,\n                        \"headersAsComment\": false\n                    }\n                }\n            ]\n        },\n        {\n        \"type\": \"http\",\n        \"paths\": [\n            {\n                \"path\": \"/data/ingestion/kafka\"\n            }\n        ],\n        \"entrypoints\": [\n            {\n                \"type\": \"http-post\",\n                \"configuration\": {\n                    \"requestHeadersToMessage\": false\n                }\n            }\n        ]\n      }\n    ],\n\"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzU2OTk3MjksInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.niCW_FJFSHt9qQ0hSngNB9A25H349PEZTF_YBdZMDR4; Path=/; Expires=Mon, 13-Feb-2023 16:08:49 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/0ad085e6-01c7-4aa1-9085-e601c74aa1ff"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1537"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"0ad085e6-01c7-4aa1-9085-e601c74aa1ff\",\n    \"name\": \"Kafka and SSE\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"createdAt\": 1675699730275,\n    \"updatedAt\": 1675699730275,\n    \"description\": \"Kafka and SSE\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/sse/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"sse\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"metadataAsComment\": false,\n                        \"heartbeatIntervalInMs\": 5000,\n                        \"headersAsComment\": false\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\": [\n                            \"demo\"\n                        ],\n                        \"producer\": {\n                            \"enabled\": true\n                        },\n                        \"consumer\": {\n                            \"encodeMessageId\": true,\n                            \"enabled\": true,\n                            \"autoOffsetReset\": \"latest\"\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [],\n    \"groups\": [],\n    \"visibility\": \"PRIVATE\",\n    \"state\": \"STOPPED\",\n    \"primaryOwner\": {\n        \"id\": \"2175caaf-ded4-4216-b5ca-afded49216c8\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				},
				{
					"name": "Create an Open (keyless) Plan",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": [
						{
							"name": "Create an Open (keyless) Plan",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"plans"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzU2OTk3NzUsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.gQXvTagMx5vAZ799FXEeZsSkv4nnXO_BGO0Oc7MJ-wU; Path=/; Expires=Mon, 13-Feb-2023 16:09:35 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/0ad085e6-01c7-4aa1-9085-e601c74aa1ff/plans/57d94912-5f8e-4db4-9949-125f8e4db4b7"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "558"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"57d94912-5f8e-4db4-9949-125f8e4db4b7\",\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"createdAt\": 1675699775794,\n    \"updatedAt\": 1675699775794,\n    \"publishedAt\": 1675699775796,\n    \"validation\": \"auto\",\n    \"type\": \"api\",\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [],\n    \"status\": \"published\",\n    \"apiId\": \"0ad085e6-01c7-4aa1-9085-e601c74aa1ff\",\n    \"order\": 0,\n    \"characteristics\": [],\n    \"commentRequired\": false,\n    \"planStatus\": \"published\",\n    \"planSecurity\": {\n        \"type\": \"key-less\"\n    },\n    \"planValidation\": \"auto\"\n}"
						}
					]
				},
				{
					"name": "Start the API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}?action=start",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							],
							"query": [
								{
									"key": "action",
									"value": "start"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Push Data",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tempF\": \"75\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{gateway_host}}/data/ingestion/kafka",
							"host": [
								"{{gateway_host}}"
							],
							"path": [
								"data",
								"ingestion",
								"kafka"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Flow to API",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Kafka and SSE - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Kafka and SSE - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"validation\": \"AUTO\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/sse/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"sse\",\n                    \"configuration\": {\n                        \"heartbeatIntervalInMs\": 5000,\n                        \"metadataAsComment\": false,\n                        \"headersAsComment\": false\n                    }\n                }\n            ]\n        },\n        {\n        \"type\": \"http\",\n        \"paths\": [\n            {\n                \"path\": \"/data/ingestion/kafka\"\n            }\n        ],\n        \"entrypoints\": [\n            {\n                \"type\": \"http-post\",\n                \"configuration\": {\n                    \"requestHeadersToMessage\": false\n                }\n            }\n        ]\n      }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							]
						}
					},
					"response": [
						{
							"name": "Add Flow to API",
							"originalRequest": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Kafka and SSE - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Kafka and SSE - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"validation\": \"AUTO\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/sse/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"sse\",\n                    \"configuration\": {\n                        \"heartbeatIntervalInMs\": 5000,\n                        \"metadataAsComment\": false,\n                        \"headersAsComment\": false\n                    }\n                }\n            ]\n        },\n        {\n        \"type\": \"http\",\n        \"paths\": [\n            {\n                \"path\": \"/data/ingestion/kafka\"\n            }\n        ],\n        \"entrypoints\": [\n            {\n                \"type\": \"http-post\",\n                \"configuration\": {\n                    \"requestHeadersToMessage\": false\n                }\n            }\n        ]\n      }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzU3MDAwMjAsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.gc5z1TP7HHR27W0-LAjPB1cln0x1EVXWgj-R7VeEVFY; Path=/; Expires=Mon, 13-Feb-2023 16:13:40 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675700020225\""
								},
								{
									"key": "Last-Modified",
									"value": "Mon, 06 Feb 2023 16:13:40 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "3078"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"0ad085e6-01c7-4aa1-9085-e601c74aa1ff\",\n    \"name\": \"Kafka and SSE - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1675699816300,\n    \"createdAt\": 1675699730275,\n    \"updatedAt\": 1675700020225,\n    \"description\": \"Kafka and SSE - Subscription Filtering\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/sse/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"sse\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"metadataAsComment\": false,\n                        \"heartbeatIntervalInMs\": 5000,\n                        \"headersAsComment\": false\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\": [\n                            \"demo\"\n                        ],\n                        \"producer\": {\n                            \"enabled\": true\n                        },\n                        \"consumer\": {\n                            \"encodeMessageId\": true,\n                            \"enabled\": true,\n                            \"autoOffsetReset\": \"latest\"\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [\n        {\n            \"id\": \"57d94912-5f8e-4db4-9949-125f8e4db4b7\",\n            \"name\": \"Open\",\n            \"description\": \"Keyless\",\n            \"createdAt\": 1675699775794,\n            \"updatedAt\": 1675699775794,\n            \"publishedAt\": 1675699775796,\n            \"validation\": \"auto\",\n            \"type\": \"api\",\n            \"security\": {\n                \"type\": \"key-less\"\n            },\n            \"flows\": [],\n            \"status\": \"published\",\n            \"apiId\": \"0ad085e6-01c7-4aa1-9085-e601c74aa1ff\",\n            \"order\": 0,\n            \"characteristics\": [],\n            \"commentRequired\": false,\n            \"planStatus\": \"published\",\n            \"planSecurity\": {\n                \"type\": \"key-less\"\n            },\n            \"planValidation\": \"auto\"\n        }\n    ],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"tags\": []\n        }\n    ],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"2175caaf-ded4-4216-b5ca-afded49216c8\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"pictureUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/0ad085e6-01c7-4aa1-9085-e601c74aa1ff/picture?hash=1675700020225\",\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false,\n    \"backgroundUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/0ad085e6-01c7-4aa1-9085-e601c74aa1ff/background?hash=1675700020225\"\n}"
						}
					]
				},
				{
					"name": "Redeploy API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"deploy"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Kafka and Webhooks",
			"item": [
				{
					"name": "Create the API",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Kafka and Webhooks\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Webhook + Kafka - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n            {\n                \"type\": \"subscription\",\n                \"entrypoints\": [\n                    {\n                        \"type\": \"webhook\"\n                    }\n                ]\n            },\n            {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n          }\n        ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis"
							]
						}
					},
					"response": [
						{
							"name": "Create the API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Kafka and Webhooks\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Webhook + Kafka - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n            {\n                \"type\": \"subscription\",\n                \"entrypoints\": [\n                    {\n                        \"type\": \"webhook\"\n                    }\n                ]\n            },\n            {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n          }\n        ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUzNDc2NzgsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.VfSDE9qn5B9aGUhf1BPyelagPBgEdTsHtXsJnf3GXIg; Path=/; Expires=Thu, 09-Feb-2023 14:21:18 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/9a56f324-edd7-4a88-96f3-24edd77a884e"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1421"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"9a56f324-edd7-4a88-96f3-24edd77a884e\",\n    \"name\": \"Kafka and Webhooks\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"createdAt\": 1675347679105,\n    \"updatedAt\": 1675347679105,\n    \"description\": \"Demo of Webhook + Kafka - Subscription Filtering\",\n    \"listeners\": [\n        {\n            \"type\": \"subscription\",\n            \"entrypoints\": [\n                {\n                    \"type\": \"webhook\",\n                    \"qos\": \"auto\"\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\": [\n                            \"demo\"\n                        ],\n                        \"producer\": {\n                            \"enabled\": true\n                        },\n                        \"consumer\": {\n                            \"encodeMessageId\": true,\n                            \"enabled\": true,\n                            \"autoOffsetReset\": \"latest\"\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [],\n    \"groups\": [],\n    \"visibility\": \"PRIVATE\",\n    \"state\": \"STOPPED\",\n    \"primaryOwner\": {\n        \"id\": \"6e816683-a50d-4cf0-8166-83a50d4cf03d\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				},
				{
					"name": "Create keyless plan",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\":\"Keyless\",\n    \"description\":\"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\":[],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": [
						{
							"name": "Create keyless plan",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\":\"Keyless\",\n    \"description\":\"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\":[],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"plans"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUzNDc3MTIsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.1oaTWNTdZZQaf6WZuyGR8TMZr5kugsxd2waBYWm0ne4; Path=/; Expires=Thu, 09-Feb-2023 14:21:52 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/9a56f324-edd7-4a88-96f3-24edd77a884e/plans/00d71104-8973-46a8-9711-04897316a88c"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "561"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"00d71104-8973-46a8-9711-04897316a88c\",\n    \"name\": \"Keyless\",\n    \"description\": \"Keyless\",\n    \"createdAt\": 1675347712230,\n    \"updatedAt\": 1675347712230,\n    \"publishedAt\": 1675347712231,\n    \"validation\": \"auto\",\n    \"type\": \"api\",\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [],\n    \"status\": \"published\",\n    \"apiId\": \"9a56f324-edd7-4a88-96f3-24edd77a884e\",\n    \"order\": 0,\n    \"characteristics\": [],\n    \"commentRequired\": false,\n    \"planStatus\": \"published\",\n    \"planSecurity\": {\n        \"type\": \"key-less\"\n    },\n    \"planValidation\": \"auto\"\n}"
						}
					]
				},
				{
					"name": "Create an Open (subscription) Plan",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"subscription\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": [
						{
							"name": "Create an Open (subscription) Plan",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"subscription\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"plans"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUzNDc3NzksInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.2EauzIsFB-nNQn6rrWdLN63K2ALXBVyoEW5JHodCh-k; Path=/; Expires=Thu, 09-Feb-2023 14:22:59 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/9a56f324-edd7-4a88-96f3-24edd77a884e/plans/e9ec6ed8-df41-42eb-ac6e-d8df4182eb1e"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "570"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"e9ec6ed8-df41-42eb-ac6e-d8df4182eb1e\",\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"createdAt\": 1675347779695,\n    \"updatedAt\": 1675347779695,\n    \"publishedAt\": 1675347779695,\n    \"validation\": \"manual\",\n    \"type\": \"api\",\n    \"security\": {\n        \"type\": \"subscription\"\n    },\n    \"flows\": [],\n    \"status\": \"published\",\n    \"apiId\": \"9a56f324-edd7-4a88-96f3-24edd77a884e\",\n    \"order\": 0,\n    \"characteristics\": [],\n    \"commentRequired\": false,\n    \"planStatus\": \"published\",\n    \"planSecurity\": {\n        \"type\": \"subscription\"\n    },\n    \"planValidation\": \"manual\"\n}"
						}
					]
				},
				{
					"name": "Start the API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}?action=start",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							],
							"query": [
								{
									"key": "action",
									"value": "start"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create an Application",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"application\",\n    \"description\": \"application\",\n    \"settings\": {\n        \"app\": {\n            \"type\": \"demo\"\n        }\n    }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/applications",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"applications"
							]
						}
					},
					"response": [
						{
							"name": "Create an Application",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\":\"application\",\n    \"description\":\"application\",\n    \"settings\":\n    {\n        \"app\":\n            {   \n                \"type\":\"demo\"}\n            }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/applications",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"applications"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUzNDc4OTMsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.YicPAAiYSflS6wABNKUmuzppzuTZvZV8T92Ky9WDieE; Path=/; Expires=Thu, 09-Feb-2023 14:24:53 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/applications/886966ce-1dab-48b1-a966-ce1dab68b17d"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "481"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"886966ce-1dab-48b1-a966-ce1dab68b17d\",\n    \"name\": \"application\",\n    \"description\": \"application\",\n    \"status\": \"ACTIVE\",\n    \"type\": \"SIMPLE\",\n    \"created_at\": 1675347893455,\n    \"updated_at\": 1675347893455,\n    \"owner\": {\n        \"id\": \"6e816683-a50d-4cf0-8166-83a50d4cf03d\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"settings\": {\n        \"app\": {\n            \"type\": \"demo\"\n        }\n    },\n    \"disable_membership_notifications\": false,\n    \"api_key_mode\": \"UNSPECIFIED\"\n}"
						}
					]
				},
				{
					"name": "Subscribe to API",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"configuration\": {\n        \"entrypointId\": \"webhook\",\n        \"callbackUrl\": \"{{callback-url}}\",\n        \"headers\": [\n            {\n                \"name\": \"demoHeader\",\n                \"value\": \"my-value\"\n            },\n            {\n                \"name\": \"anotherHeader\",\n                \"value\": \"my-value2\"\n            }\n        ]\n    },\n    \"metadata\": {\n        \"feature\": \"demo-filter\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/subscriptions?application={{application}}&plan={{subplan}}",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"subscriptions"
							],
							"query": [
								{
									"key": "application",
									"value": "{{application}}"
								},
								{
									"key": "plan",
									"value": "{{subplan}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "Subscribe to API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"configuration\": {\n        \"entrypointId\": \"webhook\",\n        \"callbackUrl\": \"{{callback-url}}\",\n        \"headers\": [\n            {\n                \"name\": \"demoHeader\",\n                \"value\": \"my-value\"\n            },\n            {\n                \"name\": \"anotherHeader\",\n                \"value\": \"my-value2\"\n            }\n        ]\n    },\n    \"metadata\": {\n        \"feature\": \"demo-filter\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/subscriptions?application={{application}}&plan={{subplan}}",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"subscriptions"
									],
									"query": [
										{
											"key": "application",
											"value": "{{application}}"
										},
										{
											"key": "plan",
											"value": "{{subplan}}"
										}
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUzNDc5NzUsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.ANSYhT1V-Me6a0EsvBEDzoUs9oj-Uy-OtIC7RRkoCaY; Path=/; Expires=Thu, 09-Feb-2023 14:26:15 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/9a56f324-edd7-4a88-96f3-24edd77a884e/subscriptions/07125f0e-d4db-4efc-925f-0ed4dbcefc55"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "814"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"07125f0e-d4db-4efc-925f-0ed4dbcefc55\",\n    \"plan\": {\n        \"id\": \"e9ec6ed8-df41-42eb-ac6e-d8df4182eb1e\",\n        \"name\": \"Open\"\n    },\n    \"application\": {\n        \"id\": \"886966ce-1dab-48b1-a966-ce1dab68b17d\",\n        \"name\": \"application\",\n        \"type\": \"SIMPLE\",\n        \"description\": \"application\",\n        \"owner\": {\n            \"id\": \"6e816683-a50d-4cf0-8166-83a50d4cf03d\",\n            \"displayName\": \"admin\"\n        },\n        \"apiKeyMode\": \"UNSPECIFIED\"\n    },\n    \"status\": \"ACCEPTED\",\n    \"metadata\": {\n        \"feature\": \"demo-filter\"\n    },\n    \"processed_at\": 1675347975258,\n    \"processed_by\": \"6e816683-a50d-4cf0-8166-83a50d4cf03d\",\n    \"subscribed_by\": {\n        \"id\": \"6e816683-a50d-4cf0-8166-83a50d4cf03d\",\n        \"displayName\": \"admin\"\n    },\n    \"starting_at\": 1675347975250,\n    \"created_at\": 1675347975193,\n    \"updated_at\": 1675347975258\n}"
						}
					]
				},
				{
					"name": "Push Data",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tempF\": \"75\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{gateway_host}}/data/ingestion/kafka",
							"host": [
								"{{gateway_host}}"
							],
							"path": [
								"data",
								"ingestion",
								"kafka"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Flow to API",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"validation\": \"AUTO\",\n    \"listeners\": [\n            {\n                \"type\": \"subscription\",\n                \"entrypoints\": [\n                    {\n                        \"type\": \"webhook\"\n                    }\n                ]\n            },\n            {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n          }\n        ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == #subscription.metadata.feature}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							]
						}
					},
					"response": [
						{
							"name": "Add Flow to API",
							"originalRequest": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"validation\": \"AUTO\",\n    \"listeners\": [\n            {\n                \"type\": \"subscription\",\n                \"entrypoints\": [\n                    {\n                        \"type\": \"webhook\"\n                    }\n                ]\n            },\n            {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n          }\n        ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == #subscription.metadata.feature}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUzNDgxMDAsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.bML1LKXUndRz2GPRRCegIBGs1vBxlY8CMkulGUgGjRQ; Path=/; Expires=Thu, 09-Feb-2023 14:28:20 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675348100203\""
								},
								{
									"key": "Last-Modified",
									"value": "Thu, 02 Feb 2023 14:28:20 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "3578"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"9a56f324-edd7-4a88-96f3-24edd77a884e\",\n    \"name\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1675347885490,\n    \"createdAt\": 1675347679105,\n    \"updatedAt\": 1675348100203,\n    \"description\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"subscription\",\n            \"entrypoints\": [\n                {\n                    \"type\": \"webhook\",\n                    \"qos\": \"auto\"\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\": [\n                            \"demo\"\n                        ],\n                        \"producer\": {\n                            \"enabled\": true\n                        },\n                        \"consumer\": {\n                            \"encodeMessageId\": true,\n                            \"enabled\": true,\n                            \"autoOffsetReset\": \"latest\"\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [\n        {\n            \"id\": \"00d71104-8973-46a8-9711-04897316a88c\",\n            \"name\": \"Keyless\",\n            \"description\": \"Keyless\",\n            \"createdAt\": 1675347712230,\n            \"updatedAt\": 1675347712230,\n            \"publishedAt\": 1675347712231,\n            \"validation\": \"auto\",\n            \"type\": \"api\",\n            \"security\": {\n                \"type\": \"key-less\"\n            },\n            \"flows\": [],\n            \"status\": \"published\",\n            \"apiId\": \"9a56f324-edd7-4a88-96f3-24edd77a884e\",\n            \"order\": 0,\n            \"characteristics\": [],\n            \"commentRequired\": false,\n            \"planStatus\": \"published\",\n            \"planSecurity\": {\n                \"type\": \"key-less\"\n            },\n            \"planValidation\": \"auto\"\n        },\n        {\n            \"id\": \"e9ec6ed8-df41-42eb-ac6e-d8df4182eb1e\",\n            \"name\": \"Open\",\n            \"description\": \"Keyless\",\n            \"createdAt\": 1675347779695,\n            \"updatedAt\": 1675347779695,\n            \"publishedAt\": 1675347779695,\n            \"validation\": \"manual\",\n            \"type\": \"api\",\n            \"security\": {\n                \"type\": \"subscription\"\n            },\n            \"flows\": [],\n            \"status\": \"published\",\n            \"apiId\": \"9a56f324-edd7-4a88-96f3-24edd77a884e\",\n            \"order\": 0,\n            \"characteristics\": [],\n            \"commentRequired\": false,\n            \"planStatus\": \"published\",\n            \"planSecurity\": {\n                \"type\": \"subscription\"\n            },\n            \"planValidation\": \"manual\"\n        }\n    ],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == #subscription.metadata.feature}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"tags\": []\n        }\n    ],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"6e816683-a50d-4cf0-8166-83a50d4cf03d\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"pictureUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/9a56f324-edd7-4a88-96f3-24edd77a884e/picture?hash=1675348100203\",\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false,\n    \"backgroundUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/9a56f324-edd7-4a88-96f3-24edd77a884e/background?hash=1675348100203\"\n}"
						}
					]
				},
				{
					"name": "Redeploy API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"deploy"
							]
						}
					},
					"response": [
						{
							"name": "Redeploy API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"deploy"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUzNDgxMzIsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.TvHgU8B_wK7cKzPhPl5gyVRn5bf0I3w5ouDJ5pKIxLU; Path=/; Expires=Thu, 09-Feb-2023 14:28:52 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675348132446\""
								},
								{
									"key": "Last-Modified",
									"value": "Thu, 02 Feb 2023 14:28:52 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1992"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"9a56f324-edd7-4a88-96f3-24edd77a884e\",\n    \"name\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1675348132446,\n    \"createdAt\": 1675347679105,\n    \"updatedAt\": 1675348132446,\n    \"description\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"subscription\",\n            \"entrypoints\": [\n                {\n                    \"type\": \"webhook\",\n                    \"qos\": \"auto\"\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\": [\n                            \"demo\"\n                        ],\n                        \"producer\": {\n                            \"enabled\": true\n                        },\n                        \"consumer\": {\n                            \"encodeMessageId\": true,\n                            \"enabled\": true,\n                            \"autoOffsetReset\": \"latest\"\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == #subscription.metadata.feature}\"\n                    }\n                }\n            ],\n            \"publish\": []\n        }\n    ],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"6e816683-a50d-4cf0-8166-83a50d4cf03d\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				}
			]
		},
		{
			"name": "Kafka and Websockets",
			"item": [
				{
					"name": "Create the API",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Demo of Kafka and Websockets\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Kafka and Websockets\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/ws\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"configuration\": {\n                        \"publisher\": {\n                            \"enabled\": true\n                        },\n                        \"subscriber\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        },\n        {\n        \"type\": \"http\",\n        \"paths\": [\n            {\n                \"path\": \"/data/ingestion/kafka\"\n            }\n        ],\n        \"entrypoints\": [\n            {\n                \"type\": \"http-post\",\n                \"configuration\": {\n                    \"requestHeadersToMessage\": false\n                }\n            }\n        ]\n      }\n    ],\n\"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis"
							]
						}
					},
					"response": [
						{
							"name": "Create the API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Demo of Kafka and Websockets\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Kafka and Websockets\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/ws\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"configuration\": {\n                        \"publisher\": {\n                            \"enabled\": true\n                        },\n                        \"subscriber\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        },\n        {\n        \"type\": \"http\",\n        \"paths\": [\n            {\n                \"path\": \"/data/ingestion/kafka\"\n            }\n        ],\n        \"entrypoints\": [\n            {\n                \"type\": \"http-post\",\n                \"configuration\": {\n                    \"requestHeadersToMessage\": false\n                }\n            }\n        ]\n      }\n    ],\n\"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzU2NzQ0MjcsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.zu6mNVfOkHjo9NEQEfYdZ8rzgn5FaOC48h0cP-wfFzk; Path=/; Expires=Mon, 13-Feb-2023 09:07:07 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/f72cb424-ba8b-4c72-acb4-24ba8bdc723a"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1545"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"f72cb424-ba8b-4c72-acb4-24ba8bdc723a\",\n    \"name\": \"Demo of Kafka and Websockets\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"createdAt\": 1675674428097,\n    \"updatedAt\": 1675674428097,\n    \"description\": \"Demo of Kafka and Websockets\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/ws/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"subscriber\": {\n                            \"enabled\": true\n                        },\n                        \"publisher\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\": [\n                            \"demo\"\n                        ],\n                        \"producer\": {\n                            \"enabled\": true\n                        },\n                        \"consumer\": {\n                            \"encodeMessageId\": true,\n                            \"enabled\": true,\n                            \"autoOffsetReset\": \"latest\"\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [],\n    \"groups\": [],\n    \"visibility\": \"PRIVATE\",\n    \"state\": \"STOPPED\",\n    \"primaryOwner\": {\n        \"id\": \"55fe195c-94db-40c6-be19-5c94db50c67b\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				},
				{
					"name": "Create an Open (keyless) Plan",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": [
						{
							"name": "Create an Open (keyless) Plan",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"plans"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzU2NzQ0OTQsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.NwyTx4seFUuCKuDEDF4Q0NTwgqj22sXR-t-ZwmOZ-f4; Path=/; Expires=Mon, 13-Feb-2023 09:08:14 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/f72cb424-ba8b-4c72-acb4-24ba8bdc723a/plans/17bcd33d-c8e7-4a5b-bcd3-3dc8e7ca5b2b"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "558"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"17bcd33d-c8e7-4a5b-bcd3-3dc8e7ca5b2b\",\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"createdAt\": 1675674494100,\n    \"updatedAt\": 1675674494100,\n    \"publishedAt\": 1675674494102,\n    \"validation\": \"auto\",\n    \"type\": \"api\",\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [],\n    \"status\": \"published\",\n    \"apiId\": \"f72cb424-ba8b-4c72-acb4-24ba8bdc723a\",\n    \"order\": 0,\n    \"characteristics\": [],\n    \"commentRequired\": false,\n    \"planValidation\": \"auto\",\n    \"planStatus\": \"published\",\n    \"planSecurity\": {\n        \"type\": \"key-less\"\n    }\n}"
						}
					]
				},
				{
					"name": "Start the API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}?action=start",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							],
							"query": [
								{
									"key": "action",
									"value": "start"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Push Data",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tempF\": \"75\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{gateway_host}}/data/ingestion/kafka",
							"host": [
								"{{gateway_host}}"
							],
							"path": [
								"data",
								"ingestion",
								"kafka"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Flow to API",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Demo of Kafka and Websockets\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Kafka and Websockets\",\n    \"visibility\": \"PUBLIC\",\n    \"validation\": \"AUTO\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/ws\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"configuration\": {\n                        \"publisher\": {\n                            \"enabled\": true\n                        },\n                        \"subscriber\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        },\n        {\n        \"type\": \"http\",\n        \"paths\": [\n            {\n                \"path\": \"/data/ingestion/kafka\"\n            }\n        ],\n        \"entrypoints\": [\n            {\n                \"type\": \"http-post\",\n                \"configuration\": {\n                    \"requestHeadersToMessage\": false\n                }\n            }\n        ]\n      }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							]
						}
					},
					"response": [
						{
							"name": "Add Flow to API",
							"originalRequest": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Demo of Kafka and Websockets\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Kafka and Websockets\",\n    \"visibility\": \"PUBLIC\",\n    \"validation\": \"AUTO\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/ws\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"configuration\": {\n                        \"publisher\": {\n                            \"enabled\": true\n                        },\n                        \"subscriber\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        },\n        {\n        \"type\": \"http\",\n        \"paths\": [\n            {\n                \"path\": \"/data/ingestion/kafka\"\n            }\n        ],\n        \"entrypoints\": [\n            {\n                \"type\": \"http-post\",\n                \"configuration\": {\n                    \"requestHeadersToMessage\": false\n                }\n            }\n        ]\n      }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\" : [\"demo\"],\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzU2NzQ4NjgsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.utko8nbWESh7aeOkjlkj1tRu_-YA81m1CMAJylSjDKM; Path=/; Expires=Mon, 13-Feb-2023 09:14:28 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675674868900\""
								},
								{
									"key": "Last-Modified",
									"value": "Mon, 06 Feb 2023 09:14:28 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "3036"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"f72cb424-ba8b-4c72-acb4-24ba8bdc723a\",\n    \"name\": \"Demo of Kafka and Websockets\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1675674539916,\n    \"createdAt\": 1675674428097,\n    \"updatedAt\": 1675674868900,\n    \"description\": \"Demo of Kafka and Websockets\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/ws/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"subscriber\": {\n                            \"enabled\": true\n                        },\n                        \"publisher\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\": [\n                            \"demo\"\n                        ],\n                        \"producer\": {\n                            \"enabled\": true\n                        },\n                        \"consumer\": {\n                            \"encodeMessageId\": true,\n                            \"enabled\": true,\n                            \"autoOffsetReset\": \"latest\"\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [\n        {\n            \"id\": \"17bcd33d-c8e7-4a5b-bcd3-3dc8e7ca5b2b\",\n            \"name\": \"Open\",\n            \"description\": \"Keyless\",\n            \"createdAt\": 1675674494100,\n            \"updatedAt\": 1675674494100,\n            \"publishedAt\": 1675674494102,\n            \"validation\": \"auto\",\n            \"type\": \"api\",\n            \"security\": {\n                \"type\": \"key-less\"\n            },\n            \"flows\": [],\n            \"status\": \"published\",\n            \"apiId\": \"f72cb424-ba8b-4c72-acb4-24ba8bdc723a\",\n            \"order\": 0,\n            \"characteristics\": [],\n            \"commentRequired\": false,\n            \"planValidation\": \"auto\",\n            \"planStatus\": \"published\",\n            \"planSecurity\": {\n                \"type\": \"key-less\"\n            }\n        }\n    ],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"tags\": []\n        }\n    ],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"55fe195c-94db-40c6-be19-5c94db50c67b\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"pictureUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/f72cb424-ba8b-4c72-acb4-24ba8bdc723a/picture?hash=1675674868900\",\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false,\n    \"backgroundUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/f72cb424-ba8b-4c72-acb4-24ba8bdc723a/background?hash=1675674868900\"\n}"
						}
					]
				},
				{
					"name": "Redeploy API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"deploy"
							]
						}
					},
					"response": [
						{
							"name": "Redeploy API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"deploy"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzU2NzQ5MTUsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.KqoQgl8E8ZSTCstXJc6sf8PWxxy2EvxS-whGMuTiNu4; Path=/; Expires=Mon, 13-Feb-2023 09:15:15 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675674915326\""
								},
								{
									"key": "Last-Modified",
									"value": "Mon, 06 Feb 2023 09:15:15 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "2071"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"f72cb424-ba8b-4c72-acb4-24ba8bdc723a\",\n    \"name\": \"Demo of Kafka and Websockets\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1675674915326,\n    \"createdAt\": 1675674428097,\n    \"updatedAt\": 1675674915326,\n    \"description\": \"Demo of Kafka and Websockets\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/ws/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"subscriber\": {\n                            \"enabled\": true\n                        },\n                        \"publisher\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"kafka:9092\",\n                        \"topics\": [\n                            \"demo\"\n                        ],\n                        \"producer\": {\n                            \"enabled\": true\n                        },\n                        \"consumer\": {\n                            \"encodeMessageId\": true,\n                            \"enabled\": true,\n                            \"autoOffsetReset\": \"latest\"\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": []\n        }\n    ],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"55fe195c-94db-40c6-be19-5c94db50c67b\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				}
			]
		},
		{
			"name": "MQTT and HTTP",
			"item": [
				{
					"name": "Create the API",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Demo of HTTP Post + MQTT\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of HTTP Post + MQTT\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"cors\": {\n                \"enabled\": true,\n                \"allowOrigin\": [\n                    \"*\"\n                ],\n                \"allowHeaders\": [\n                    \"X-Gravitee-Api-Key\"\n                ],\n                \"allowMethods\": [\n                    \"GET\",\n                    \"POST\",\n                    \"OPTIONS\"\n                ],\n                \"exposeHeaders\": [\n                    \"X-Rate-Limit-Limit\",\n                    \"X-Rate-Limit-Remaining\",\n                    \"X-Rate-Limit-Reset\"\n                ]\n            },\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\"\n                },\n                {\n                    \"type\": \"http-get\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 1,\n                        \"messagesLimitDurationMs\": 10000,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis"
							]
						}
					},
					"response": [
						{
							"name": "Create the API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Demo of HTTP Post + MQTT\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of HTTP Post + MQTT\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"cors\": {\n                \"enabled\": true,\n                \"allowOrigin\": [\n                    \"*\"\n                ],\n                \"allowHeaders\": [\n                    \"X-Gravitee-Api-Key\"\n                ],\n                \"allowMethods\": [\n                    \"GET\",\n                    \"POST\",\n                    \"OPTIONS\"\n                ],\n                \"exposeHeaders\": [\n                    \"X-Rate-Limit-Limit\",\n                    \"X-Rate-Limit-Remaining\",\n                    \"X-Rate-Limit-Reset\"\n                ]\n            },\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\"\n                },\n                {\n                    \"type\": \"http-get\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 1,\n                        \"messagesLimitDurationMs\": 10000,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzQ4MjAwNTEsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.Ygux2uav6aeiZT4LcdGA-a6eH0OgU48ksVhwPNTPCko; Path=/; Expires=Fri, 03-Feb-2023 11:47:31 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/4bfb005f-45ae-4358-bb00-5f45ae435855"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1702"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"4bfb005f-45ae-4358-bb00-5f45ae435855\",\n    \"name\": \"Demo of HTTP Post + MQTT\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"createdAt\": 1674820051716,\n    \"updatedAt\": 1674820051716,\n    \"description\": \"Demo of HTTP Post + MQTT\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt/\"\n                }\n            ],\n            \"cors\": {\n                \"enabled\": true,\n                \"allowCredentials\": false,\n                \"allowOrigin\": [\n                    \"*\"\n                ],\n                \"allowHeaders\": [\n                    \"x-gravitee-api-key\"\n                ],\n                \"allowMethods\": [\n                    \"POST\",\n                    \"GET\",\n                    \"OPTIONS\"\n                ],\n                \"exposeHeaders\": [\n                    \"x-rate-limit-limit\",\n                    \"x-rate-limit-remaining\",\n                    \"x-rate-limit-reset\"\n                ],\n                \"maxAge\": -1\n            },\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\"\n                },\n                {\n                    \"type\": \"http-get\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 1,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false,\n                        \"messagesLimitDurationMs\": 10000\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\": {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [],\n    \"groups\": [],\n    \"visibility\": \"PRIVATE\",\n    \"state\": \"STOPPED\",\n    \"primaryOwner\": {\n        \"id\": \"3f4431bb-e631-4214-8431-bbe631621444\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				},
				{
					"name": "Create an Open (keyless) plan",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": [
						{
							"name": "Create an Open (keyless) plan",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"plans"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzQ4MjA0MzksInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.6ZUVHiGwBX1qIjVXwkoC8QZzwj8VILIwuNkcVXjt0Ko; Path=/; Expires=Fri, 03-Feb-2023 11:53:59 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/4bfb005f-45ae-4358-bb00-5f45ae435855/plans/04678d7c-4de3-44b0-a78d-7c4de324b068"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "558"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"04678d7c-4de3-44b0-a78d-7c4de324b068\",\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"createdAt\": 1674820439263,\n    \"updatedAt\": 1674820439263,\n    \"publishedAt\": 1674820439264,\n    \"validation\": \"auto\",\n    \"type\": \"api\",\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [],\n    \"status\": \"published\",\n    \"apiId\": \"4bfb005f-45ae-4358-bb00-5f45ae435855\",\n    \"order\": 0,\n    \"characteristics\": [],\n    \"commentRequired\": false,\n    \"planStatus\": \"published\",\n    \"planSecurity\": {\n        \"type\": \"key-less\"\n    },\n    \"planValidation\": \"auto\"\n}"
						}
					]
				},
				{
					"name": "Start the API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}?action=start",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							],
							"query": [
								{
									"key": "action",
									"value": "start"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Topic",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{gateway_host}}/demo/mqtt",
							"host": [
								"{{gateway_host}}"
							],
							"path": [
								"demo",
								"mqtt"
							]
						}
					},
					"response": []
				},
				{
					"name": "Push Data",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tempF\": \"75\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{gateway_host}}/demo/mqtt",
							"host": [
								"{{gateway_host}}"
							],
							"path": [
								"demo",
								"mqtt"
							]
						}
					},
					"response": [
						{
							"name": "Push Data",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"tempF\": \"75\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gateway_host}}/demo/mqtt",
									"host": [
										"{{gateway_host}}"
									],
									"path": [
										"demo",
										"mqtt"
									]
								}
							},
							"status": "Too Many Requests",
							"code": 429,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Gravitee-Transaction-Id",
									"value": "69557d9c-8390-417e-957d-9c8390b17efc"
								},
								{
									"key": "X-Gravitee-Request-Id",
									"value": "69557d9c-8390-417e-957d-9c8390b17efc"
								},
								{
									"key": "X-Gravitee-Client-Identifier",
									"value": "69557d9c-8390-417e-957d-9c8390b17efc"
								},
								{
									"key": "X-Rate-Limit-Limit",
									"value": "1"
								},
								{
									"key": "X-Rate-Limit-Remaining",
									"value": "0"
								},
								{
									"key": "X-Rate-Limit-Reset",
									"value": "1675073085024"
								},
								{
									"key": "Content-Length",
									"value": "107"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": \"Rate limit exceeded ! You reach the limit of 1 requests per 20 seconds\",\n    \"http_status_code\": 429\n}"
						}
					]
				},
				{
					"name": "Get Data",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{gateway_host}}/demo/mqtt",
							"host": [
								"{{gateway_host}}"
							],
							"path": [
								"demo",
								"mqtt"
							]
						}
					},
					"response": [
						{
							"name": "Get Data",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_host}}/demo/mqtt",
									"host": [
										"{{gateway_host}}"
									],
									"path": [
										"demo",
										"mqtt"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Gravitee-Transaction-Id",
									"value": "e18d7355-fb83-4f18-8d73-55fb830f1878"
								},
								{
									"key": "X-Gravitee-Request-Id",
									"value": "e18d7355-fb83-4f18-8d73-55fb830f1878"
								},
								{
									"key": "X-Gravitee-Client-Identifier",
									"value": "e18d7355-fb83-4f18-8d73-55fb830f1878"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "transfer-encoding",
									"value": "chunked"
								}
							],
							"cookie": [],
							"body": "{\n    \"items\": []\n}"
						},
						{
							"name": "Get Data",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_host}}/demo/mqtt",
									"host": [
										"{{gateway_host}}"
									],
									"path": [
										"demo",
										"mqtt"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Gravitee-Transaction-Id",
									"value": "856bb3a8-1793-4746-abb3-a81793e74609"
								},
								{
									"key": "X-Gravitee-Request-Id",
									"value": "856bb3a8-1793-4746-abb3-a81793e74609"
								},
								{
									"key": "X-Gravitee-Client-Identifier",
									"value": "856bb3a8-1793-4746-abb3-a81793e74609"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "transfer-encoding",
									"value": "chunked"
								}
							],
							"cookie": [],
							"body": "{\n    \"items\": [\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        }\n    ]\n}"
						},
						{
							"name": "Get Data",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_host}}/demo/mqtt",
									"host": [
										"{{gateway_host}}"
									],
									"path": [
										"demo",
										"mqtt"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Gravitee-Transaction-Id",
									"value": "615dd97e-6725-4fc7-9dd9-7e6725efc778"
								},
								{
									"key": "X-Gravitee-Request-Id",
									"value": "615dd97e-6725-4fc7-9dd9-7e6725efc778"
								},
								{
									"key": "X-Gravitee-Client-Identifier",
									"value": "615dd97e-6725-4fc7-9dd9-7e6725efc778"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "transfer-encoding",
									"value": "chunked"
								}
							],
							"cookie": [],
							"body": "{\n    \"items\": [\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        },\n        {\n            \"content\": \"{\\n    \\\"tempF\\\": \\\"75\\\"\\n}\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Modify the API",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{   \"id\": \"{{api}}\",\n    \"name\": \"Demo of HTTP GET + MQTT\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of HTTP GET + MQTT\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"cors\": {\n                \"enabled\": true,\n                \"allowOrigin\": [\n                    \"*\"\n                ],\n                \"allowHeaders\": [\n                    \"X-Gravitee-Api-Key\"\n                ],\n                \"allowMethods\": [\n                    \"GET\",\n                    \"POST\",\n                    \"OPTIONS\"\n                ],\n                \"exposeHeaders\": [\n                    \"X-Rate-Limit-Limit\",\n                    \"X-Rate-Limit-Remaining\",\n                    \"X-Rate-Limit-Reset\"\n                ]\n            },\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\"\n                },\n                {\n                    \"type\": \"http-get\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 100,\n                        \"messagesLimitDurationMs\": 10000,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							]
						}
					},
					"response": [
						{
							"name": "Modify the API",
							"originalRequest": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{   \"id\": \"{{api}}\",\n    \"name\": \"Demo of HTTP GET + MQTT\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of HTTP GET + MQTT\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"cors\": {\n                \"enabled\": true,\n                \"allowOrigin\": [\n                    \"*\"\n                ],\n                \"allowHeaders\": [\n                    \"X-Gravitee-Api-Key\"\n                ],\n                \"allowMethods\": [\n                    \"GET\",\n                    \"POST\",\n                    \"OPTIONS\"\n                ],\n                \"exposeHeaders\": [\n                    \"X-Rate-Limit-Limit\",\n                    \"X-Rate-Limit-Remaining\",\n                    \"X-Rate-Limit-Reset\"\n                ]\n            },\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\"\n                },\n                {\n                    \"type\": \"http-get\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 100,\n                        \"messagesLimitDurationMs\": 10000,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzQ4Mjc1MTIsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.MYcuvvRRwuPuPpitY7yeGWb1Q-a5CsyzCB2oZMp3u10; Path=/; Expires=Fri, 03-Feb-2023 13:51:52 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1674827512133\""
								},
								{
									"key": "Last-Modified",
									"value": "Fri, 27 Jan 2023 13:51:52 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "2768"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"4bfb005f-45ae-4358-bb00-5f45ae435855\",\n    \"name\": \"Demo of HTTP GET + MQTT\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1674820636935,\n    \"createdAt\": 1674820051716,\n    \"updatedAt\": 1674827512133,\n    \"description\": \"Demo of HTTP GET + MQTT\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt/\"\n                }\n            ],\n            \"cors\": {\n                \"enabled\": true,\n                \"allowCredentials\": false,\n                \"allowOrigin\": [\n                    \"*\"\n                ],\n                \"allowHeaders\": [\n                    \"x-gravitee-api-key\"\n                ],\n                \"allowMethods\": [\n                    \"POST\",\n                    \"GET\",\n                    \"OPTIONS\"\n                ],\n                \"exposeHeaders\": [\n                    \"x-rate-limit-limit\",\n                    \"x-rate-limit-remaining\",\n                    \"x-rate-limit-reset\"\n                ],\n                \"maxAge\": -1\n            },\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\"\n                },\n                {\n                    \"type\": \"http-get\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 100,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false,\n                        \"messagesLimitDurationMs\": 10000\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\": {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [\n        {\n            \"id\": \"04678d7c-4de3-44b0-a78d-7c4de324b068\",\n            \"name\": \"Open\",\n            \"description\": \"Keyless\",\n            \"createdAt\": 1674820439263,\n            \"updatedAt\": 1674820439263,\n            \"publishedAt\": 1674820439264,\n            \"validation\": \"auto\",\n            \"type\": \"api\",\n            \"security\": {\n                \"type\": \"key-less\"\n            },\n            \"flows\": [],\n            \"status\": \"published\",\n            \"apiId\": \"4bfb005f-45ae-4358-bb00-5f45ae435855\",\n            \"order\": 0,\n            \"characteristics\": [],\n            \"commentRequired\": false,\n            \"planStatus\": \"published\",\n            \"planSecurity\": {\n                \"type\": \"key-less\"\n            },\n            \"planValidation\": \"auto\"\n        }\n    ],\n    \"flowMode\": \"default\",\n    \"flows\": [],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"3f4431bb-e631-4214-8431-bbe631621444\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"pictureUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/4bfb005f-45ae-4358-bb00-5f45ae435855/picture?hash=1674827512133\",\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false,\n    \"backgroundUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/4bfb005f-45ae-4358-bb00-5f45ae435855/background?hash=1674827512133\"\n}"
						}
					]
				},
				{
					"name": "Redeploy API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"deploy"
							]
						}
					},
					"response": [
						{
							"name": "Redeploy API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"deploy"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzQ4Mjc3MzEsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.aARX-WrWTMl_o44NuhW0c2gN_dy0Hja1BeKGMu7elVM; Path=/; Expires=Fri, 03-Feb-2023 13:55:31 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1674827731377\""
								},
								{
									"key": "Last-Modified",
									"value": "Fri, 27 Jan 2023 13:55:31 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1804"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"4bfb005f-45ae-4358-bb00-5f45ae435855\",\n    \"name\": \"Demo of HTTP GET + MQTT\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1674827731377,\n    \"createdAt\": 1674820051716,\n    \"updatedAt\": 1674827731377,\n    \"description\": \"Demo of HTTP GET + MQTT\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt/\"\n                }\n            ],\n            \"cors\": {\n                \"enabled\": true,\n                \"allowCredentials\": false,\n                \"allowOrigin\": [\n                    \"*\"\n                ],\n                \"allowHeaders\": [\n                    \"x-gravitee-api-key\"\n                ],\n                \"allowMethods\": [\n                    \"POST\",\n                    \"GET\",\n                    \"OPTIONS\"\n                ],\n                \"exposeHeaders\": [\n                    \"x-rate-limit-limit\",\n                    \"x-rate-limit-remaining\",\n                    \"x-rate-limit-reset\"\n                ],\n                \"maxAge\": -1\n            },\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"qos\": \"auto\"\n                },\n                {\n                    \"type\": \"http-get\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 100,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false,\n                        \"messagesLimitDurationMs\": 10000\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\": {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"3f4431bb-e631-4214-8431-bbe631621444\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				},
				{
					"name": "Close plan",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans/{{plan}}/_close",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans",
								"{{plan}}",
								"_close"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create a rate-limiting plan",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Rate-limiting\",\n    \"description\": \"One request every 20 seconds\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [\n        {\n            \"name\": \"All requests\",\n            \"selectors\": [\n                {\n                    \"type\": \"channel\",\n                    \"entrypoints\": [\n                        \"http-post\",\n                        \"http-get\"\n                    ]\n                }\n            ],\n            \"request\": [\n                {\n                    \"name\": \"Rate Limiting\",\n                    \"description\": \"Rate limit\",\n                    \"policy\": \"rate-limit\",\n                    \"configuration\": {\n                        \"addHeaders\": true,\n                        \"rate\": {\n                            \"limit\": 1,\n                            \"periodTime\": 20,\n                            \"periodTimeUnit\": \"SECONDS\"\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": [
						{
							"name": "Create a rate-limiting plan",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Rate-limiting\",\n    \"description\": \"One request every 20 seconds\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [\n        {\n            \"name\": \"All requests\",\n            \"selectors\": [\n                {\n                    \"type\": \"channel\",\n                    \"entrypoints\": [\n                        \"http-post\",\n                        \"http-get\"\n                    ]\n                }\n            ],\n            \"request\": [\n                {\n                    \"name\": \"Rate Limiting\",\n                    \"description\": \"Rate limit\",\n                    \"policy\": \"rate-limit\",\n                    \"configuration\": {\n                        \"addHeaders\": true,\n                        \"rate\": {\n                            \"limit\": 1,\n                            \"periodTime\": 20,\n                            \"periodTimeUnit\": \"SECONDS\"\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"plans"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUwNzQ0MjUsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0._sB0Tu8cZ-25QHylTbEZRcPgRcVL1tlLfka9y5m5_vk; Path=/; Expires=Mon, 06-Feb-2023 10:27:05 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/4bfb005f-45ae-4358-bb00-5f45ae435855/plans/ccf21839-1fc0-4bf3-b218-391fc01bf380"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1157"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"ccf21839-1fc0-4bf3-b218-391fc01bf380\",\n    \"name\": \"Rate-limiting\",\n    \"description\": \"One request every 20 seconds\",\n    \"createdAt\": 1675074425522,\n    \"updatedAt\": 1675074425522,\n    \"publishedAt\": 1675074425522,\n    \"validation\": \"auto\",\n    \"type\": \"api\",\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [\n        {\n            \"name\": \"All requests\",\n            \"enabled\": true,\n            \"selectors\": [\n                {\n                    \"type\": \"channel\",\n                    \"channel\": \"/\",\n                    \"channelOperator\": \"STARTS_WITH\",\n                    \"entrypoints\": [\n                        \"http-post\",\n                        \"http-get\"\n                    ]\n                }\n            ],\n            \"request\": [\n                {\n                    \"name\": \"Rate Limiting\",\n                    \"description\": \"Rate limit\",\n                    \"enabled\": true,\n                    \"policy\": \"rate-limit\",\n                    \"configuration\": {\n                        \"addHeaders\": true,\n                        \"rate\": {\n                            \"limit\": 1,\n                            \"periodTime\": 20,\n                            \"periodTimeUnit\": \"SECONDS\"\n                        }\n                    }\n                }\n            ],\n            \"response\": [],\n            \"subscribe\": [],\n            \"publish\": [],\n            \"tags\": []\n        }\n    ],\n    \"status\": \"published\",\n    \"apiId\": \"4bfb005f-45ae-4358-bb00-5f45ae435855\",\n    \"order\": 0,\n    \"characteristics\": [],\n    \"commentRequired\": false,\n    \"planStatus\": \"published\",\n    \"planSecurity\": {\n        \"type\": \"key-less\"\n    },\n    \"planValidation\": \"auto\"\n}"
						}
					]
				}
			]
		},
		{
			"name": "MQTT and SSE",
			"item": [
				{
					"name": "Create the API",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"MQTT and SSE\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"MQTT and SSE\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"sse\",\n                    \"configuration\": {\n                        \"heartbeatIntervalInMs\": 5000,\n                        \"metadataAsComment\": false,\n                        \"headersAsComment\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis"
							]
						}
					},
					"response": [
						{
							"name": "Create the API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"MQTT and SSE\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"MQTT and SSE\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"sse\",\n                    \"configuration\": {\n                        \"heartbeatIntervalInMs\": 5000,\n                        \"metadataAsComment\": false,\n                        \"headersAsComment\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzU2OTQ0NjYsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.UiWv5p8lzCfuvbRp_vAQf4jcW7_8M3dO8LQLmbqyH8c; Path=/; Expires=Mon, 13-Feb-2023 14:41:06 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/2f82242e-fc70-4918-8224-2efc70a9182c"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1258"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"2f82242e-fc70-4918-8224-2efc70a9182c\",\n    \"name\": \"MQTT and SSE\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"createdAt\": 1675694466958,\n    \"updatedAt\": 1675694466958,\n    \"description\": \"MQTT and SSE\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"sse\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"metadataAsComment\": false,\n                        \"heartbeatIntervalInMs\": 5000,\n                        \"headersAsComment\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\": {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [],\n    \"groups\": [],\n    \"visibility\": \"PRIVATE\",\n    \"state\": \"STOPPED\",\n    \"primaryOwner\": {\n        \"id\": \"232ef182-829a-49ae-aef1-82829a89aef8\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				},
				{
					"name": "Create an Open (keyless) Plan",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": [
						{
							"name": "Create an Open (keyless) Plan",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"plans"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzU2OTQ1MTcsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.rw1KQ00ku3aY3VTeezmOYUdZHmdTRytRbPOacHRkh3E; Path=/; Expires=Mon, 13-Feb-2023 14:41:57 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/2f82242e-fc70-4918-8224-2efc70a9182c/plans/3af3fc91-fa85-4de2-b3fc-91fa856de2c8"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "558"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"3af3fc91-fa85-4de2-b3fc-91fa856de2c8\",\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"createdAt\": 1675694517762,\n    \"updatedAt\": 1675694517762,\n    \"publishedAt\": 1675694517766,\n    \"validation\": \"auto\",\n    \"type\": \"api\",\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [],\n    \"status\": \"published\",\n    \"apiId\": \"2f82242e-fc70-4918-8224-2efc70a9182c\",\n    \"order\": 0,\n    \"characteristics\": [],\n    \"commentRequired\": false,\n    \"planStatus\": \"published\",\n    \"planSecurity\": {\n        \"type\": \"key-less\"\n    },\n    \"planValidation\": \"auto\"\n}"
						}
					]
				},
				{
					"name": "Start the API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}?action=start",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							],
							"query": [
								{
									"key": "action",
									"value": "start"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Flow to API",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"MQTT and SSE - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"MQTT and SSE - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"validation\": \"AUTO\",\n    \"listeners\":[\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"sse\",\n                    \"configuration\": {\n                        \"heartbeatIntervalInMs\": 5000,\n                        \"metadataAsComment\": false,\n                        \"headersAsComment\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							]
						}
					},
					"response": [
						{
							"name": "Add Flow to API",
							"originalRequest": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"MQTT and SSE - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"MQTT and SSE - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"validation\": \"AUTO\",\n    \"listeners\":[\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"sse\",\n                    \"configuration\": {\n                        \"heartbeatIntervalInMs\": 5000,\n                        \"metadataAsComment\": false,\n                        \"headersAsComment\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzU2OTQ4NDMsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.OddaK0zFOCMMf-xuOSwRjnlFJjU7nuq7CzMwfzMG-Yo; Path=/; Expires=Mon, 13-Feb-2023 14:47:23 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675694843252\""
								},
								{
									"key": "Last-Modified",
									"value": "Mon, 06 Feb 2023 14:47:23 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "2799"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"2f82242e-fc70-4918-8224-2efc70a9182c\",\n    \"name\": \"MQTT and SSE - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1675694562971,\n    \"createdAt\": 1675694466958,\n    \"updatedAt\": 1675694843252,\n    \"description\": \"MQTT and SSE - Subscription Filtering\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"sse\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"metadataAsComment\": false,\n                        \"heartbeatIntervalInMs\": 5000,\n                        \"headersAsComment\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\": {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [\n        {\n            \"id\": \"3af3fc91-fa85-4de2-b3fc-91fa856de2c8\",\n            \"name\": \"Open\",\n            \"description\": \"Keyless\",\n            \"createdAt\": 1675694517762,\n            \"updatedAt\": 1675694517762,\n            \"publishedAt\": 1675694517766,\n            \"validation\": \"auto\",\n            \"type\": \"api\",\n            \"security\": {\n                \"type\": \"key-less\"\n            },\n            \"flows\": [],\n            \"status\": \"published\",\n            \"apiId\": \"2f82242e-fc70-4918-8224-2efc70a9182c\",\n            \"order\": 0,\n            \"characteristics\": [],\n            \"commentRequired\": false,\n            \"planStatus\": \"published\",\n            \"planSecurity\": {\n                \"type\": \"key-less\"\n            },\n            \"planValidation\": \"auto\"\n        }\n    ],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"tags\": []\n        }\n    ],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"232ef182-829a-49ae-aef1-82829a89aef8\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"pictureUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/2f82242e-fc70-4918-8224-2efc70a9182c/picture?hash=1675694843252\",\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false,\n    \"backgroundUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/2f82242e-fc70-4918-8224-2efc70a9182c/background?hash=1675694843252\"\n}"
						}
					]
				},
				{
					"name": "Redeploy API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"deploy"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "MQTT and Webhooks",
			"item": [
				{
					"name": "Create the API",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n            {\n                \"type\": \"subscription\",\n                \"entrypoints\": [\n                    {\n                        \"type\": \"webhook\"\n                    }\n                ]\n            }\n        ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis"
							]
						}
					},
					"response": [
						{
							"name": "Create the API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n            {\n                \"type\": \"subscription\",\n                \"entrypoints\": [\n                    {\n                        \"type\": \"webhook\"\n                    }\n                ]\n            }\n        ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUwOTAyNTAsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.xxMX5T0aKeMjXuPzyHItgWnWTgprR6nsX2ithnmw0o0; Path=/; Expires=Mon, 06-Feb-2023 14:50:50 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/48923b1a-3df6-442f-923b-1a3df6d42fbb"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1177"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"48923b1a-3df6-442f-923b-1a3df6d42fbb\",\n    \"name\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"createdAt\": 1675090250286,\n    \"updatedAt\": 1675090250286,\n    \"description\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"listeners\": [\n        {\n            \"type\": \"subscription\",\n            \"entrypoints\": [\n                {\n                    \"type\": \"webhook\",\n                    \"qos\": \"auto\"\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\": {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [],\n    \"groups\": [],\n    \"visibility\": \"PRIVATE\",\n    \"state\": \"STOPPED\",\n    \"primaryOwner\": {\n        \"id\": \"57044f34-27da-4762-844f-3427da276275\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				},
				{
					"name": "Create an Open (subscription) Plan",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"subscription\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": [
						{
							"name": "Create an Open (subscription) Plan",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"subscription\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"plans"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUwOTA0NjIsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.A5Kog-q_EVYez6cHh_BAu2fbYt_ptkrFqj1yhyKwzSc; Path=/; Expires=Mon, 06-Feb-2023 14:54:22 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/48923b1a-3df6-442f-923b-1a3df6d42fbb/plans/bc0fc731-0420-4413-8fc7-310420f41379"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "570"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"bc0fc731-0420-4413-8fc7-310420f41379\",\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"createdAt\": 1675090462705,\n    \"updatedAt\": 1675090462705,\n    \"publishedAt\": 1675090462705,\n    \"validation\": \"manual\",\n    \"type\": \"api\",\n    \"security\": {\n        \"type\": \"subscription\"\n    },\n    \"flows\": [],\n    \"status\": \"published\",\n    \"apiId\": \"48923b1a-3df6-442f-923b-1a3df6d42fbb\",\n    \"order\": 0,\n    \"characteristics\": [],\n    \"commentRequired\": false,\n    \"planStatus\": \"published\",\n    \"planSecurity\": {\n        \"type\": \"subscription\"\n    },\n    \"planValidation\": \"manual\"\n}"
						}
					]
				},
				{
					"name": "Start the API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}?action=start",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							],
							"query": [
								{
									"key": "action",
									"value": "start"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create an Application",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"application\",\n    \"description\": \"application\",\n    \"settings\": {\n        \"app\": {\n            \"type\": \"demo\"\n        }\n    }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/applications",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"applications"
							]
						}
					},
					"response": [
						{
							"name": "Create an Application",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\":\"application\",\n    \"description\":\"application\",\n    \"settings\":\n    {\n        \"app\":\n            {   \n                \"type\":\"demo\"}\n            }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/applications",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"applications"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUwOTM1OTIsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.gKMRLIAdv8a3fv7e2IadW99PrzdfcUmX0WSx_zCeswQ; Path=/; Expires=Mon, 06-Feb-2023 15:46:32 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/applications/7e15e1b6-80b5-43f3-95e1-b680b5e3f317"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "481"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"7e15e1b6-80b5-43f3-95e1-b680b5e3f317\",\n    \"name\": \"application\",\n    \"description\": \"application\",\n    \"status\": \"ACTIVE\",\n    \"type\": \"SIMPLE\",\n    \"created_at\": 1675093592934,\n    \"updated_at\": 1675093592934,\n    \"owner\": {\n        \"id\": \"57044f34-27da-4762-844f-3427da276275\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"settings\": {\n        \"app\": {\n            \"type\": \"demo\"\n        }\n    },\n    \"disable_membership_notifications\": false,\n    \"api_key_mode\": \"UNSPECIFIED\"\n}"
						}
					]
				},
				{
					"name": "Subscribe to API",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"configuration\": {\n        \"entrypointId\": \"webhook\",\n        \"callbackUrl\": \"{{callback-url}}\",\n        \"headers\": [\n            {\n                \"name\": \"demoHeader\",\n                \"value\": \"my-value\"\n            },\n            {\n                \"name\": \"anotherHeader\",\n                \"value\": \"my-value2\"\n            }\n        ]\n    },\n    \"metadata\": {\n        \"feature\": \"demo-filter\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/subscriptions?application={{application}}&plan={{plan}}",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"subscriptions"
							],
							"query": [
								{
									"key": "application",
									"value": "{{application}}"
								},
								{
									"key": "plan",
									"value": "{{plan}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "Subscribe to API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"configuration\": {\n        \"entrypointId\": \"webhook\",\n        \"callbackUrl\": \"{{callback-url}}\",\n        \"headers\": [\n            {\n                \"name\": \"demoHeader\",\n                \"value\": \"my-value\"\n            },\n            {\n                \"name\": \"anotherHeader\",\n                \"value\": \"my-value2\"\n            }\n        ]\n    },\n    \"metadata\": {\n        \"feature\": \"demo-filter\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/subscriptions?application={{application}}&plan={{plan}}",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"subscriptions"
									],
									"query": [
										{
											"key": "application",
											"value": "{{application}}"
										},
										{
											"key": "plan",
											"value": "{{plan}}"
										}
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUwOTM5NzIsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.VC4_FJLEKpnb_DK03rp0bCQP2cfc0ifQajsUYk35sGo; Path=/; Expires=Mon, 06-Feb-2023 15:52:52 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/48923b1a-3df6-442f-923b-1a3df6d42fbb/subscriptions/7bbbe5d6-0745-4228-bbe5-d60745c2281c"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "814"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"7bbbe5d6-0745-4228-bbe5-d60745c2281c\",\n    \"plan\": {\n        \"id\": \"bc0fc731-0420-4413-8fc7-310420f41379\",\n        \"name\": \"Open\"\n    },\n    \"application\": {\n        \"id\": \"7e15e1b6-80b5-43f3-95e1-b680b5e3f317\",\n        \"name\": \"application\",\n        \"type\": \"SIMPLE\",\n        \"description\": \"application\",\n        \"owner\": {\n            \"id\": \"57044f34-27da-4762-844f-3427da276275\",\n            \"displayName\": \"admin\"\n        },\n        \"apiKeyMode\": \"UNSPECIFIED\"\n    },\n    \"status\": \"ACCEPTED\",\n    \"metadata\": {\n        \"feature\": \"demo-filter\"\n    },\n    \"processed_at\": 1675093972850,\n    \"processed_by\": \"57044f34-27da-4762-844f-3427da276275\",\n    \"subscribed_by\": {\n        \"id\": \"57044f34-27da-4762-844f-3427da276275\",\n        \"displayName\": \"admin\"\n    },\n    \"starting_at\": 1675093972848,\n    \"created_at\": 1675093972832,\n    \"updated_at\": 1675093972850\n}"
						}
					]
				},
				{
					"name": "Add Flow to API",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"validation\": \"AUTO\",\n    \"listeners\": [\n            {\n                \"type\": \"subscription\",\n                \"entrypoints\": [\n                    {\n                        \"type\": \"webhook\"\n                    }\n                ]\n            }\n        ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == #subscription.metadata.feature}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							]
						}
					},
					"response": [
						{
							"name": "Add Flow to API",
							"originalRequest": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"validation\": \"AUTO\",\n    \"listeners\": [\n            {\n                \"type\": \"subscription\",\n                \"entrypoints\": [\n                    {\n                        \"type\": \"webhook\"\n                    }\n                ]\n            }\n        ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == #subscription.metadata.feature}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUxNTcwMTIsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.EgSmBTsvI7g5-9R4HMz57jikpnWZLqjqN8mz3mrIa-c; Path=/; Expires=Tue, 07-Feb-2023 09:23:32 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675157012827\""
								},
								{
									"key": "Last-Modified",
									"value": "Tue, 31 Jan 2023 09:23:32 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "2697"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"48923b1a-3df6-442f-923b-1a3df6d42fbb\",\n    \"name\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1675090533628,\n    \"createdAt\": 1675090250286,\n    \"updatedAt\": 1675157012827,\n    \"description\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"subscription\",\n            \"entrypoints\": [\n                {\n                    \"type\": \"webhook\",\n                    \"qos\": \"auto\"\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\": {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [\n        {\n            \"id\": \"bc0fc731-0420-4413-8fc7-310420f41379\",\n            \"name\": \"Open\",\n            \"description\": \"Keyless\",\n            \"createdAt\": 1675090462705,\n            \"updatedAt\": 1675090462705,\n            \"publishedAt\": 1675090462705,\n            \"validation\": \"manual\",\n            \"type\": \"api\",\n            \"security\": {\n                \"type\": \"subscription\"\n            },\n            \"flows\": [],\n            \"status\": \"published\",\n            \"apiId\": \"48923b1a-3df6-442f-923b-1a3df6d42fbb\",\n            \"order\": 0,\n            \"characteristics\": [],\n            \"commentRequired\": false,\n            \"planStatus\": \"published\",\n            \"planSecurity\": {\n                \"type\": \"subscription\"\n            },\n            \"planValidation\": \"manual\"\n        }\n    ],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == #subscription.metadata.feature}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"tags\": []\n        }\n    ],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"57044f34-27da-4762-844f-3427da276275\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"pictureUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/48923b1a-3df6-442f-923b-1a3df6d42fbb/picture?hash=1675157012827\",\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false,\n    \"backgroundUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/48923b1a-3df6-442f-923b-1a3df6d42fbb/background?hash=1675157012827\"\n}"
						}
					]
				},
				{
					"name": "Redeploy API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"deploy"
							]
						}
					},
					"response": [
						{
							"name": "Redeploy API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"deploy"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUxNTc1NDksInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.WAnQKecKJgPMkX7B1-2fHdRzY4IAHM962NqYxVrXI-Q; Path=/; Expires=Tue, 07-Feb-2023 09:32:29 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675157549486\""
								},
								{
									"key": "Last-Modified",
									"value": "Tue, 31 Jan 2023 09:32:29 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1720"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"48923b1a-3df6-442f-923b-1a3df6d42fbb\",\n    \"name\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1675157549486,\n    \"createdAt\": 1675090250286,\n    \"updatedAt\": 1675157549486,\n    \"description\": \"Demo of Webhook + MQTT - Subscription Filtering\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"subscription\",\n            \"entrypoints\": [\n                {\n                    \"type\": \"webhook\",\n                    \"qos\": \"auto\"\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\": {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == #subscription.metadata.feature}\"\n                    }\n                }\n            ],\n            \"publish\": []\n        }\n    ],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"57044f34-27da-4762-844f-3427da276275\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				}
			]
		},
		{
			"name": "MQTT and Websockets",
			"item": [
				{
					"name": "Create the API",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Demo of Websocket + MQTT\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Websocket + MQTT\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"configuration\": {\n                        \"publisher\": {\n                            \"enabled\": true\n                        },\n                        \"subscriber\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis"
							]
						}
					},
					"response": [
						{
							"name": "Create the API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Demo of Websocket + MQTT\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Websocket + MQTT\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"configuration\": {\n                        \"publisher\": {\n                            \"enabled\": true\n                        },\n                        \"subscriber\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUxNjQ0MzIsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.DzAiHH8o22wLHMt3sbgyVa9pw1qZvsjDt4tU-c_tNY4; Path=/; Expires=Tue, 07-Feb-2023 11:27:12 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/2bb38b7c-1818-4b63-b38b-7c18185b63fd"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1267"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"2bb38b7c-1818-4b63-b38b-7c18185b63fd\",\n    \"name\": \"Demo of Websocket + MQTT\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"createdAt\": 1675164433265,\n    \"updatedAt\": 1675164433265,\n    \"description\": \"Demo of Websocket + MQTT\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"subscriber\": {\n                            \"enabled\": true\n                        },\n                        \"publisher\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\": {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [],\n    \"groups\": [],\n    \"visibility\": \"PRIVATE\",\n    \"state\": \"STOPPED\",\n    \"primaryOwner\": {\n        \"id\": \"d113a81c-2c63-4ae3-93a8-1c2c634ae3bf\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				},
				{
					"name": "Create an Open (keyless) Plan",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": [
						{
							"name": "Create an Open (keyless) Plan",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"plans"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUxNjQ1MTUsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.NKuOqs-gSJAOKROgF2X29bEns1oTiqBVQMUP7TxOBCI; Path=/; Expires=Tue, 07-Feb-2023 11:28:35 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "Location",
									"value": "http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/2bb38b7c-1818-4b63-b38b-7c18185b63fd/plans/e9131ad7-2889-4481-931a-d72889148105"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "558"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"e9131ad7-2889-4481-931a-d72889148105\",\n    \"name\": \"Open\",\n    \"description\": \"Keyless\",\n    \"createdAt\": 1675164515978,\n    \"updatedAt\": 1675164515978,\n    \"publishedAt\": 1675164515981,\n    \"validation\": \"auto\",\n    \"type\": \"api\",\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [],\n    \"status\": \"published\",\n    \"apiId\": \"2bb38b7c-1818-4b63-b38b-7c18185b63fd\",\n    \"order\": 0,\n    \"characteristics\": [],\n    \"commentRequired\": false,\n    \"planStatus\": \"published\",\n    \"planSecurity\": {\n        \"type\": \"key-less\"\n    },\n    \"planValidation\": \"auto\"\n}"
						}
					]
				},
				{
					"name": "Start the API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}?action=start",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							],
							"query": [
								{
									"key": "action",
									"value": "start"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Flow to API",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Demo of Websocket + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Websocket + MQTT - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"validation\": \"AUTO\",\n    \"listeners\":[\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"configuration\": {\n                        \"publisher\": {\n                            \"enabled\": true\n                        },\n                        \"subscriber\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							]
						}
					},
					"response": [
						{
							"name": "Add Flow to API",
							"originalRequest": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Demo of Websocket + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Demo of Websocket + MQTT - Subscription Filtering\",\n    \"visibility\": \"PUBLIC\",\n    \"validation\": \"AUTO\",\n    \"listeners\":[\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"configuration\": {\n                        \"publisher\": {\n                            \"enabled\": true\n                        },\n                        \"subscriber\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUxNjU4NzYsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.X8IA27pEA_XiCEOZ0ZCssRFkSwDhC-Dv4RAa-1fE7VM; Path=/; Expires=Tue, 07-Feb-2023 11:51:16 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675165876693\""
								},
								{
									"key": "Last-Modified",
									"value": "Tue, 31 Jan 2023 11:51:16 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "2808"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"2bb38b7c-1818-4b63-b38b-7c18185b63fd\",\n    \"name\": \"Demo of Websocket + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1675164661401,\n    \"createdAt\": 1675164433265,\n    \"updatedAt\": 1675165876693,\n    \"description\": \"Demo of Websocket + MQTT - Subscription Filtering\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"subscriber\": {\n                            \"enabled\": true\n                        },\n                        \"publisher\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\": {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [\n        {\n            \"id\": \"e9131ad7-2889-4481-931a-d72889148105\",\n            \"name\": \"Open\",\n            \"description\": \"Keyless\",\n            \"createdAt\": 1675164515978,\n            \"updatedAt\": 1675164515978,\n            \"publishedAt\": 1675164515981,\n            \"validation\": \"auto\",\n            \"type\": \"api\",\n            \"security\": {\n                \"type\": \"key-less\"\n            },\n            \"flows\": [],\n            \"status\": \"published\",\n            \"apiId\": \"2bb38b7c-1818-4b63-b38b-7c18185b63fd\",\n            \"order\": 0,\n            \"characteristics\": [],\n            \"commentRequired\": false,\n            \"planStatus\": \"published\",\n            \"planSecurity\": {\n                \"type\": \"key-less\"\n            },\n            \"planValidation\": \"auto\"\n        }\n    ],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": [],\n            \"tags\": []\n        }\n    ],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"d113a81c-2c63-4ae3-93a8-1c2c634ae3bf\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"pictureUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/2bb38b7c-1818-4b63-b38b-7c18185b63fd/picture?hash=1675165876693\",\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false,\n    \"backgroundUrl\": \"http://localhost:8083/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/2bb38b7c-1818-4b63-b38b-7c18185b63fd/background?hash=1675165876693\"\n}"
						}
					]
				},
				{
					"name": "Redeploy API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"deploy"
							]
						}
					},
					"response": [
						{
							"name": "Redeploy API",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
									"host": [
										"{{management_host}}"
									],
									"path": [
										"management",
										"organizations",
										"DEFAULT",
										"environments",
										"DEFAULT",
										"v4",
										"apis",
										"{{api}}",
										"deploy"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Vary",
									"value": "Origin"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Method"
								},
								{
									"key": "Vary",
									"value": "Access-Control-Request-Headers"
								},
								{
									"key": "X-Xsrf-Token",
									"value": "99ce174f-1189-402e-87a0-0b1536800891"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=; Path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; HttpOnly"
								},
								{
									"key": "Set-Cookie",
									"value": "XSRF-TOKEN=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJncmF2aXRlZS1tYW5hZ2VtZW50LWF1dGgiLCJpYXQiOjE2NzUxNjU4ODUsInRva2VuIjoiOTljZTE3NGYtMTE4OS00MDJlLTg3YTAtMGIxNTM2ODAwODkxIn0.5XgPVWOlzeiQF1aGLxBzgtI6kOhWW0Q6etSztz_n5SQ; Path=/; Expires=Tue, 07-Feb-2023 11:51:25 GMT; Max-Age=604800; HttpOnly"
								},
								{
									"key": "Expires",
									"value": "Thu, 01 Jan 1970 00:00:00 GMT"
								},
								{
									"key": "ETag",
									"value": "\"1675165885824\""
								},
								{
									"key": "Last-Modified",
									"value": "Tue, 31 Jan 2023 11:51:25 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Content-Length",
									"value": "1843"
								}
							],
							"cookie": [],
							"body": "{\n    \"id\": \"2bb38b7c-1818-4b63-b38b-7c18185b63fd\",\n    \"name\": \"Demo of Websocket + MQTT - Subscription Filtering\",\n    \"apiVersion\": \"1.0.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"deployedAt\": 1675165885824,\n    \"createdAt\": 1675164433265,\n    \"updatedAt\": 1675165885824,\n    \"description\": \"Demo of Websocket + MQTT - Subscription Filtering\",\n    \"tags\": [],\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/mqtt/\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"websocket\",\n                    \"qos\": \"auto\",\n                    \"configuration\": {\n                        \"subscriber\": {\n                            \"enabled\": true\n                        },\n                        \"publisher\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"mqtt5\",\n            \"endpoints\": [\n                {\n                    \"name\": \"HiveMQ Broker\",\n                    \"type\": \"mqtt5\",\n                    \"secondary\": false,\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"serverHost\": \"hivemq\",\n                        \"serverPort\": \"1883\",\n                        \"topic\": \"demo\",\n                        \"consumer\": {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"properties\": [],\n    \"resources\": [],\n    \"plans\": [],\n    \"flowMode\": \"default\",\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"enabled\": true,\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [\n                {\n                    \"name\": \"Message filtering\",\n                    \"description\": \"Apply filter to messages\",\n                    \"enabled\": true,\n                    \"policy\": \"message-filtering\",\n                    \"configuration\": {\n                        \"filter\": \"{#jsonPath(#message.content, '$.feature') == 'demo-filter'}\"\n                    }\n                }\n            ],\n            \"publish\": []\n        }\n    ],\n    \"responseTemplates\": {},\n    \"groups\": [],\n    \"visibility\": \"PUBLIC\",\n    \"state\": \"STARTED\",\n    \"primaryOwner\": {\n        \"id\": \"d113a81c-2c63-4ae3-93a8-1c2c634ae3bf\",\n        \"displayName\": \"admin\",\n        \"type\": \"USER\"\n    },\n    \"lifecycleState\": \"CREATED\",\n    \"disableMembershipNotifications\": false\n}"
						}
					]
				}
			]
		},
		{
			"name": "Kafka Advanced, HTTP, and Confluent Cloud",
			"item": [
				{
					"name": "Create API",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Kafka, HTTP, and Confluent Cloud\",\n    \"apiVersion\": \"1.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Kafka, HTTP, and Confluent Cloud\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/http-get\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-get\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 1,\n                        \"messagesLimitDurationMs\": 10000,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka-advanced\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka-advanced\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"{{kafkabootstrap}}\",\n                        \"topics\" : [\"demo\"],\n                         \"security\" : {\n                            \"protocol\" : \"SASL_PLAINTEXT\",\n                            \"sasl\": {\n                                \"saslMechanism\" : \"PLAIN\",\n                                \"saslJaasConfig\" : \"org.apache.kafka.common.security.plain.PlainLoginModule required username=\\\"{{kafkakey}}\\\" password=\\\"{{kafkasecret}}\\\";\"\n                            }\n                        },\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Create keyless plan",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\":\"Keyless\",\n    \"description\":\"Keyless\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\":[],\n    \"security\": {\n        \"type\": \"key-less\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": []
				},
				{
					"name": "Start API",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/?action=start",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								""
							],
							"query": [
								{
									"key": "action",
									"value": "start"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Push Data",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"tempF\": \"75\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{gateway_host}}/data/ingestion/kafka",
							"host": [
								"{{gateway_host}}"
							],
							"path": [
								"data",
								"ingestion",
								"kafka"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Data",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{gateway_host}}/demo/http-get",
							"host": [
								"{{gateway_host}}"
							],
							"path": [
								"demo",
								"http-get"
							]
						}
					},
					"response": []
				},
				{
					"name": "Modify API",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "{{management_password}}",
									"type": "string"
								},
								{
									"key": "username",
									"value": "{{management_username}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"{{api}}\",\n    \"name\": \"Kafka, HTTP, and Confluent Cloud\",\n    \"apiVersion\": \"1.0\",\n    \"definitionVersion\": \"4.0.0\",\n    \"type\": \"async\",\n    \"description\": \"Kafka, HTTP, and Confluent Cloud\",\n    \"visibility\": \"PUBLIC\",\n    \"listeners\": [\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/data/ingestion/kafka\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-post\",\n                    \"configuration\": {\n                        \"requestHeadersToMessage\": false\n                    }\n                }\n            ]\n        },\n        {\n            \"type\": \"http\",\n            \"paths\": [\n                {\n                    \"path\": \"/demo/http-get\"\n                }\n            ],\n            \"entrypoints\": [\n                {\n                    \"type\": \"http-get\",\n                    \"configuration\": {\n                        \"messagesLimitCount\": 100,\n                        \"messagesLimitDurationMs\": 10000,\n                        \"headersInPayload\": false,\n                        \"metadataInPayload\": false\n                    }\n                }\n            ]\n        }\n    ],\n    \"endpointGroups\": [\n        {\n            \"name\": \"default\",\n            \"type\": \"kafka-advanced\",\n            \"endpoints\": [\n                {\n                    \"name\": \"default\",\n                    \"type\": \"kafka-advanced\",\n                    \"weight\": 1,\n                    \"inheritConfiguration\": false,\n                    \"configuration\": {\n                        \"bootstrapServers\": \"{{kafkabootstrap}}\",\n                        \"topics\" : [\"demo\"],\n                         \"security\" : {\n                            \"protocol\" : \"SASL_PLAINTEXT\",\n                            \"sasl\": {\n                                \"saslMechanism\" : \"PLAIN\",\n                                \"saslJaasConfig\" : \"org.apache.kafka.common.security.plain.PlainLoginModule required username=\\\"{{kafkakey}}\\\" password=\\\"{{kafkasecret}}\\\";\"\n                            }\n                        },\n                        \"consumer\" : {\n                            \"enabled\": true\n                        },\n                        \"producer\": {\n                            \"enabled\": true\n                        }\n                    }\n                }\n            ]\n        }\n    ],\n    \"flows\": [\n        {\n            \"name\": \"\",\n            \"selectors\": [],\n            \"request\": [],\n            \"response\": [],\n            \"subscribe\": [],\n            \"publish\": [],\n            \"enabled\": true\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Redeploy API",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/deploy",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"deploy"
							]
						}
					},
					"response": []
				},
				{
					"name": "Close plan",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans/{{plan}}/_close",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans",
								"{{plan}}",
								"_close"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create a rate-limiting plan",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Rate-limiting\",\n    \"description\": \"One request every 20 seconds\",\n    \"status\": \"PUBLISHED\",\n    \"characteristics\": [],\n    \"security\": {\n        \"type\": \"key-less\"\n    },\n    \"flows\": [\n        {\n            \"name\": \"All requests\",\n            \"selectors\": [\n                {\n                    \"type\": \"channel\",\n                    \"entrypoints\": [\n                        \"http-post\",\n                        \"http-get\"\n                    ]\n                }\n            ],\n            \"request\": [\n                {\n                    \"name\": \"Rate Limiting\",\n                    \"description\": \"Rate limit\",\n                    \"policy\": \"rate-limit\",\n                    \"configuration\": {\n                        \"addHeaders\": true,\n                        \"rate\": {\n                            \"limit\": 1,\n                            \"periodTime\": 20,\n                            \"periodTimeUnit\": \"SECONDS\"\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{management_host}}/management/organizations/DEFAULT/environments/DEFAULT/v4/apis/{{api}}/plans",
							"host": [
								"{{management_host}}"
							],
							"path": [
								"management",
								"organizations",
								"DEFAULT",
								"environments",
								"DEFAULT",
								"v4",
								"apis",
								"{{api}}",
								"plans"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"auth": {
		"type": "basic",
		"basic": [
			{
				"key": "password",
				"value": "{{management_password}}",
				"type": "string"
			},
			{
				"key": "username",
				"value": "{{management_username}}",
				"type": "string"
			},
			{
				"key": "undefined",
				"type": "any"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}