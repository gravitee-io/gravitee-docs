= Promote APIs
:page-sidebar: apim_3_x_sidebar
:page-permalink: apim/3.x/apim_publisherguide_promote_apis.html
:page-folder: apim/user-guide/publisher
:page-layout: apim3x
:page-liquid:

== Overview

The following sections describe how you can promote an API from one environment to another.

For a quick introduction on how to create an API in APIM, see link:/apim/3.x/apim_publisherguide_create_apis.html[Create an API^].

NOTE: This feature is available from APIM 3.10.0 and requires your installation to be linked to Cockpit. For more information about Cockpit, see link:/cockpit/1.x/cockpit_overview_introduction.html[Cockpit]. 

== Context

* Two installations: 
** One linked to Demo and Production environments.
** Another one linked to Dev and QA environments.
* An API to promote.
+
image::apim/3.x/api-publisher-guide/promote-apis/graviteeio-promote-api-cockpit-graph.png[Map of installations in Cockpit]
+

NOTE: You may only promote an API from one environment to another [underline]#*from within an organization*# (you are not permitted to promote APIs from one organization to another). 

== Request Promotion or an API

Here, we will see how to promote our API from environment `DEV` to environment `QA`.
The following actions must be done with an API Publisher on `DEV` environment.


. Go to the API to promote and click on image:icons/promote-button.png[role="icon"] *PROMOTE* button
+
image::apim/3.x/api-publisher-guide/promote-apis/graviteeio-promote-api-promote-1.png[Promote button]
+
. A window listing the available environments for the API promotion will pop up
+
image::apim/3.x/api-publisher-guide/promote-apis/graviteeio-promote-api-promote-2.png[Target environments list]
+
NOTE: If a promotion request already exists for your API on an environment, you cannot do another request until the previous one is rejected or accepted.
+
image::apim/3.x/api-publisher-guide/promote-apis/graviteeio-promote-api-promote-2-bis.png[Target environments list]
+
. Choose the environment you want to promote the API on, then click on *PROMOTE* button

NOTE: When promoting an API, *members* and *groups* information are lost.

NOTE: If a promotion has already been accepted for an API, you can request a new one on the same target environment. Once this promotion is accepted, the API on the target environment will be updated.

== Accepting a Promotion

As a user of `QA` environment, promotion requests are visible in the *Tasks* section.

. Go to the *Tasks* section
+
image::apim/3.x/api-publisher-guide/promote-apis/graviteeio-promote-api-promote-3.png[Promotion tasks]
+
. You can choose to accept or reject the promotion.
** Rejecting the promotion will Remove the task.
** Accepting the promotion will:
*** Create or update the API (depending on if it has already been promoted or not)
*** Remove the task.

== Roles & Permission Required
Currently, the only required permission set necessary to promote an API is 'Definition.' Questions about roles and  permissions? See https://nightly-docs.gravitee.io/apim/3.x/apim_adminguide_roles_and_permissions.html#permission[Table 3, API Scope Permissions]. 

To give a user the ability to request an API promotion, you will need to create a custom role for API Scope with 'Create' and 'Update' permissions. 

To do so, follow these steps: 

. Go to Organization Settings. 
. Choose Roles and scroll down to *scope: API*. Click *ADD A NEW ROLE* and name the role something sensible for your use case. 
. Now finish creating the custom role and ensure you have checked the *CREATE* and *UPDATE* checkboxes for *DEFINITION*.
. Save your new custom role.  
