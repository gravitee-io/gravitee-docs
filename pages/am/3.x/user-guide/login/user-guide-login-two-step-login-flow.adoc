= Two-step Login Flow
:page-sidebar: am_3_x_sidebar
:page-permalink: am/current/am_userguide_login_two_step_login_flow.html
:page-folder: am/user-guide
:page-layout: am

[label label-version]#New in version 3.12#

== Overview

Two step login authentication enables the login flow to be in two steps:

- The first step consists in a page containing a single form field where you can input your username

image::am/current/graviteeio-am-userguide-login-two-step-first-page-flow.png[Two-Step Login flow first page]

- Regarding the input submitted, the user gets redirected to the login form and are asked to input your password
- If the username is an email, the user gets redirected to an external provider matching your domain based on a whitelist

image::am/current/graviteeio-am-userguide-login-two-step-second-page-flow.png[Two-Step Login flow second page]


== Activate Two-step Login

To activate Two-step Login Flow:

. link:/am/current/am_userguide_authentication.html[Log in to AM Console^].
. Go to *Settings > Login* or *Application > "Your app" > Settings > Login*.
. Switch on *2-Step login* and click *SAVE*.

image::am/current/graviteeio-am-userguide-login-two-step-settings.png[Two-Step Login flow Settings]

== Domain Whitelist on External Identity providers

External Identity providers now enable you to enter domain whitelists so that if the username submitted is an email and
its domain matches the whitelisted domain during the first step of the flow, the user gets redirected to the provider.

If you don't input any domain, the user will just get redirected to the second login page.

. Go to *Settings > Providers*.
. Create a new provider or Edit an existing one
. Enter the domains you wish to whitelist
. Complete the provider's form and click *SAVE*.

image::am/current/graviteeio-am-userguide-login-two-step-identity-provider-domain-whitelist.png[Two-Step Login flow provider Domain Whitelist]
