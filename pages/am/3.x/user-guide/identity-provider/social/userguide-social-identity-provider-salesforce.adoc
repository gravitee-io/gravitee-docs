= Salesforce
:page-sidebar: am_3_x_sidebar
:page-permalink: am/current/am_userguide_social_identity_provider_salesforce.html
:page-folder: am/user-guide
:page-layout: am

[label label-version]#New in version 3.6#

== Overview

You can authenticate users in AM with Salesforce. Before you begin, you need to sign up for a link:https://www.salesforce.com/[Salesforce account^].

== Steps

To connect your application to Salesforce, you will:

- Register a new application in Salesforce
- Create a Salesforce identity provider in AM
- Test the connection

== Register a new application in Salesforce

. Log in to your link:https://www.salesforce.com/[Salesforce account^] and create a Connected App, as described in the link:https://help.salesforce.com/articleView?id=connected_app_create.htm&type=0[Salesforce documentation^].
. Give your application a *name*, an *API name* and a *contact email*.
. Click *Enable OAuth Settings*.
. Enter `http(s)://AM_GW_HOST/YOUR_DOMAIN/login/callback` for the *callback url*.
. Select the `Access basic information (id, profile, email, address, phone)` *OAuth scope*.
. Click *Save*.

NOTE: Salesforce will generate a Consumer Key and Consumer Secret for your application. Make a note of them for later use.

== Create a Salesforce identity provider

. link:{{ '/am/current/am_userguide_authentication.html' | relative_url }}[Log in to AM Console^].
. If you want to change to a different security domain, select it from the user menu at the top right.
. Click *Settings > Providers*.
. Click the plus icon image:{% link images/icons/plus-icon.png %}[].
. Select *Salesforce* as your identity provider type and click *Next*.
+
NOTE: Ensure you have the Consumer Key and Consumer Secret generated by Salesforce to hand.
+
. Give your identity provider a name.
. Enter your Salesforce Consumer Key and Consumer Secret.
. Click *Create*.
+
image::{% link images/am/current/graviteeio-am-userguide-social-idp-salesforce.png %}[]

NOTE: If you have incorrectly set up the Salesforce app's callback URL, copy the URL in *1. Configure the Redirect URI* to the right of the page and update your Salesforce application settings.

== Test the connection

You can test your Salesforce connection using a web application created in AM.

. In AM Console, click *Applications* and select your social identity provider.
+
image::{% link images/am/current/graviteeio-am-userguide-social-idp-list.png %}[]
+
. Call the Login page (the `/oauth/authorize` endpoint). If the connection is working you will see a *Sign in with* button.
+
image::{% link images/am/current/graviteeio-am-userguide-social-idp-login.png %}[]
+
If the button is not visible, there may be a problem with the identity provider settings. Check the AM Gateway log for more information.
