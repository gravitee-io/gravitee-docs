= FranceConnect
:page-sidebar: am_3_x_sidebar
:page-permalink: am/current/am_userguide_legal_identity_provider_franceconnect.html
:page-folder: am/user-guide
:page-layout: am

NOTE: New in AM 3.3.x.

== Overview

You can authenticate users in AM with link:https://franceconnect.gouv.fr/[FranceConnect]. FranceConnect is the French government Identity Provider that connects million of legal accounts.
You can connect to it with credentials such as your National Insurance Number, postal address and more.

image::am/current/graviteeio-am-userguide-legal-franceconnect-logo.png[150,150]

Before you begin, you need to sign up for a link:https://partenaires.franceconnect.gouv.fr/[FranceConnect account].

== Steps

To connect your application to FranceConnect, you will:

- Register a new application in FranceConnect
- Create a FranceConnect identity provider in AM
- Set up the connection in FranceConnect
- Test the connection

== Register a new application in FranceConnect

To connect your application to FranceConnect, you must follow all the steps described link:https://franceconnect.gouv.fr/partenaires[here].

NOTE: FranceConnect will generate a client_ID and client_secret. Make a note of these for later use.

== Create a FranceConnect identity provider

. link:/am/current/am_userguide_authentication.html[Log in to AM Console^].
. If you want to change to a different security domain, select it from the user menu at the top right.
. Click *Settings > Providers*.
. Click the plus icon image:icons/plus-icon.png[].
. Select *FranceConnect* as your identity provider type and click *Next*.
+
NOTE: Ensure you have the Client ID and Client Secret generated by FranceConnect to hand.
+
. Give your identity provider a name.
. Enter your FranceConnect Client ID and Client Secret.
. Select at least the *openid* scope, which is mandatory.
. Click *Create*.
+
image::am/current/graviteeio-am-userguide-legal-idp-franceconnect.png[]

NOTE: Copy the URL in *1. Configure the Redirect URI* to the right of the page. You need this value to update your FranceConnect application settings in the next section.

== Set up the connection

. Go to your FranceConnect application settings and click *Add a Redirect URI*.
. Enter the Redirect URI value you copied in the previous section.

== Test the connection

You can test your FranceConnect connection using a web application created in AM.

. In AM Console, click *Applications* and select your legal identity provider.
+
image::am/current/graviteeio-am-userguide-social-idp-list.png[]
+
Call the Login page (the `/oauth/authorize` endpoint). If your connection is working you will see a *Sign in with* button.
+
image::am/current/graviteeio-am-userguide-social-idp-login.png[]
+
If you do not see the button, there may be a problem with the identity provider settings. Check the AM Gateway log for more information.

NOTE: The link:https://partenaires.franceconnect.gouv.fr/faq[FranceConnect frequently asked questions (FAQ)] can help you to set up your connection.
