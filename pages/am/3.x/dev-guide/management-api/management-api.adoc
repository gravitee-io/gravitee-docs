= AM Management
:page-sidebar: am_3_x_sidebar
:page-permalink: am/current/am_devguide_management_api_documentation.html
:page-folder: am/dev-guide/management-api
:page-toc: false
:page-layout: am

== Overview

AM Management API exposes a complete Restful API accessible to anyone wanting to script some part of the administration.

You can access the online API reference or the OpenAPI specification:

* link:/am/current/management-api/index.html[API Console] - link:/am/current/management-api/swagger.json[OpenAPI spec]

== Authorization

AM Management API is secured using token-based authorization.

NOTE: Use the HTTP Authorization request header (`Authorization Bearer token`) to call the API. You can also use an `Authorization="Bearer token"` cookie to access the Management API resources.

=== Token endpoint

The `token` endpoint is used to obtain the `AM Management API token` by presenting user credentials via the `Basic authentication scheme`.

The following example exchanges default admin account credentials (`admin/adminadmin`) for a token.

```
POST http(s)://AM_MANAGEMENT_API/management/auth/token HTTP/1.1

curl -X POST \
  http(s)://AM_MANAGEMENT_API/management/auth/token \
  -H 'authorization: Basic base64(admin:adminadmin)' \


  HTTP/1.1 200 OK
  Cache-Control: no-cache, no-store, max-age=0, must-revalidate
  Pragma: no-cache
  Expires: 0
  Content-Type: application/json
  {
      "access_token": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZ....m4g9SK1fPtcPTLmbxWZDyP1hV9vjdsLdA",
      "expires_at": "Thu Jun 28 10:35:31 CEST 2018",
      "token_type": "bearer"
  }
```

=== Authorization endpoint

The `authorization` endpoint is used to interact with the end user to obtain the `AM Management API token`.
The user will be redirected to the AM login page and authentication processed to obtain the token via an HTTP cookie.

```
GET http(s)://AM_MANAGEMENT_API/management/auth/authorize?redirect_uri=http://callback-app HTTP/1.1

curl http(s)://AM_MANAGEMENT_API/management/auth/authorize?redirect_uri=http://callback-app

  HTTP/1.1 302 Found
  Location: http(s)://AM_MANAGEMENT_API/management/auth/login


POST http(s)://AM_MANAGEMENT_API/management/auth/login

  Set-Cookie: Authorization="Bearer token"
  HTTP/1.1 302 Found
  Location: http://callback-app
```

* `redirect_uri`: redirection endpoint after authentication success
